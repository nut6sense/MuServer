--------------------------------------------------------------------
-- ������ ON, OFF ����  facility.h �� ���� ��������� �Ѵ�
--------------------------------------------------------------------
FACILITYCODE_HUNTING_GROUND 		= 0
FACILITYCODE_HUNTING_CENTER 		= 1
FACILITYCODE_HUNTING_OUTLAW 		= 2
FACILITYCODE_HUNTING_HOUSE 			= 3
FACILITYCODE_HUNTING_STATION 		= 4
FACILITYCODE_PROFILE 				= 5
FACILITYCODE_GANG_PVP 				= 6
FACILITYCODE_GANG_WAR 				= 7
FACILITYCODE_NPC_DOCTORK 			= 8
FACILITYCODE_NPC_PORTER 			= 9
FACILITYCODE_NPC_RENT 				= 10
FACILITYCODE_NPC_GANG_WAR 			= 11
FACILITYCODE_SKILL_TREE				= 12
FACILITYCODE_ITEM_RESOLVE			= 13
FACILITYCODE_COSTUME_UPGRADE		= 14
FACILITYCODE_DEAL					= 15
FACILITYCODE_CAHS_SHOP				= 16
FACILITYCODE_MYSHOP					= 17
FACILITYCODE_PETSYSTEM				= 18
FACILITYCODE_ESCROWSYSTEM			= 19
FACILITYCODE_FACEBOOKSYSTEM			= 20
FACILITYCODE_DEATHMATCH				= 21
FACILITYCODE_DUELBATTLE				= 22
FACILITYCODE_COINBATTLE				= 23
FACILITYCODE_SURVIVAL				= 24
FACILITYCODE_BOOMBATTLE				= 25
FACILITYCODE_MINITOWERBATTLE		= 26

FACILITYCODE_MAP_BASKET				= 27
FACILITYCODE_MAP_BEACH				= 28
FACILITYCODE_MAP_JUNKYARD			= 29
FACILITYCODE_MAP_BUMPER				= 30
FACILITYCODE_MAP_DANGER				= 31
FACILITYCODE_MAP_NIGHT				= 32
FACILITYCODE_MAP_SKYLOUNGE			= 33
FACILITYCODE_MAP_SUBWAY				= 34
FACILITYCODE_MAP_BARRIERFACTORY		= 35
FACILITYCODE_MAP_THE_ENDLESS_SKY	= 36
FACILITYCODE_MAP_ROOFTOP			= 37
FACILITYCODE_MAP_MAGMAFACTORY		= 38
FACILITYCODE_MAP_ARENARING			= 39
FACILITYCODE_EXITGOLOGIN			= 40
FACILITYCODE_RENTALSKILL			= 41
FACILITYCODE_TOURNAMENTEXPLAIN		= 42
FACILITYCODE_WINSTREAK				= 43
FACILITYCODE_SECRETROOMDESC			= 44
FACILITYCODE_SETROOMPASSWORD		= 45
FACILITYCODE_BESTFRIEND				= 46
FACILITYCODE_TOWERHP				= 47
FACILITYCODE_AUTOPOSTION			= 48
FACILITYCODE_BLACKSKIN				= 49
FACILITYCODE_COOLTIMEPOTION			= 50
FACILITYCODE_EXCEPTEMODE			= 51

FACILITYCODE_CC_TAEKWONDO			= 216
FACILITYCODE_CC_BOXING				= 217
FACILITYCODE_CC_MUAYTHAI			= 218
FACILITYCODE_CC_CAPOEIRA			= 219
FACILITYCODE_CC_PROWRESTLING		= 220
FACILITYCODE_CC_JUDO				= 221
FACILITYCODE_CC_HAPKIDO				= 222
FACILITYCODE_CC_SAMBO				= 223
FACILITYCODE_CC_DIRTYX				= 224
FACILITYCODE_CC_KUNGFU				= 225
FACILITYCODE_CC_SUMO				= 226
FACILITYCODE_CC_NINJA				= 227

FACILITYCODE_ZONE2					= 325
FACILITYCODE_ZONE3					= 326
FACILITYCODE_ZONE4					= 327
FACILITYCODE_ZONE5					= 328
FACILITYCODE_ZONE6					= 329
FACILITYCODE_ZONE7					= 330

FACILITYCODE_ORB_UPGRADE			= 331
FACILITYCODE_SKILL_UPGRADE			= 332

FACILITYCODE_HUNTING_TEMPLE			= 333

FACILITYCODE_HOTEL_ARCADE 			= 1001
FACILITYCODE_PARK_ARCADE 			= 1002
FACILITYCODE_HARLEM_ARCADE 			= 1003
FACILITYCODE_HROAD_ARCADE 			= 1004
FACILITYCODE_SUBWAY_ARCADE 			= 1005
FACILITYCODE_TEMPLE_ARCADE			= 1011
FACILITYCODE_HARD_ENTER 			= 1100
FACILITYCODE_CHALLENGE_ARCADE 		= 3000
FACILITYCODE_GRAVE_ARCADE			= 3001
FACILITYCODE_HUNTING_COWNZONE		= 4100
FACILITYCODE_FREEZONE				= 6000
FACILITYCODE_ZOMBIEDEFENCE			= 6001
FACILITYCODE_ZOMBIEDEFENCEHARD		= 6002

LANGUAGECODE_ENG	= 0
LANGUAGECODE_KOR	= 1
LANGUAGECODE_THAI	= 2
LANGUAGECODE_MAS	= 3
LANGUAGECODE_IDN	= 4
LANGUAGECODE_GSP	= 5

WIDETYPE_0  = 0
WIDETYPE_1  = 1
WIDETYPE_2  = 2
WIDETYPE_3  = 3
WIDETYPE_4  = 4
WIDETYPE_5  = 5
WIDETYPE_6  = 6
WIDETYPE_7  = 7
WIDETYPE_8	= 8

PET_FEED_STATE_ONE = 0
PET_FEED_STATE_TWO = 60
PET_FEED_STATE_THREE = 100
PET_FEED_STATE_MAX = 110

PET_FEED_STATE_DAMAGE1 = 0
PET_FEED_STATE_DAMAGE2 = 50
PET_FEED_STATE_DAMAGE3 = 100
PET_FEED_STATE_DAMAGE4 = 120

ARCADE_HARD_ENTER	= 1100
ARCADE_HARD_HOTEL	= 1101
ARCADE_HARD_PARK	= 1102
ARCADE_HARD_HALEM	= 1103
ARCADE_HARD_HROAD	= 1104
ARCADE_HARD_SUBWAY	= 1105
ARCADE_HARD_EVENT	= 1106


--------------------------------------------------------------------
-- ���ڿ��� ���� ����(��Ʈ �̸�) �޾ƿ´�(���ö���¡)
--------------------------------------------------------------------
g_STRING_FONT_HY_HEADLINE	= PreCreateString_1001	-- HY������M
g_STRING_FONT_GODIC			= PreCreateString_1002		-- ����
g_STRING_FONT_GULIM			= PreCreateString_1004		-- ����
g_STRING_FONT_GULIMCHE		= PreCreateString_1003	-- ����ü
g_STRING_FONT_DODUM			= PreCreateString_1005		-- ����
g_STRING_FONT_DODUMCHE		= PreCreateString_1006		-- ����ü
g_STRING_FONT_HY_GUYNGODIC	= PreCreateString_1582	-- HY�߰���

g_CLASS_STREET				= 0	-- ��Ʈ��Ʈ
g_CLASS_RUSH				= 1	-- ����
g_CLASS_TAEKWONDO			= 2	-- �±ǵ�
g_CLASS_JUDO				= 3	-- ����
g_CLASS_BOXING				= 4	-- ����
g_CLASS_PROWRESTLING		= 5	-- ���η�����
g_CLASS_CAPOERA				= 6	-- ī������
g_CLASS_HAPGIDO				= 7	-- �ձ⵵
g_CLASS_MUAYTHAI			= 8	-- ����Ÿ��
g_CLASS_SAMBO				= 9	-- �ﺸ

g_CLASS_S_DIRTYX			= 10	-- ��Ƽ����(��Ʈ��Ʈ)
g_CLASS_R_DIRTYX			= 11	-- ��Ƽ����(����)

g_CLASS_S_SUMO				= 12	-- ����(��Ʈ��Ʈ)
g_CLASS_R_SUMO				= 13	-- ����(����)

g_CLASS_S_KUNGFU			= 14	-- ��Ǫ(��Ʈ��Ʈ)
g_CLASS_R_KUNGFU			= 15	-- ��Ǫ(����)

g_CLASS_S_NINJA				= 16	-- ����(��Ʈ��Ʈ)
g_CLASS_R_NINJA				= 17	-- ����(����)


COMMON_STRING_STREET		= PreCreateString_1046		-- ��Ʈ��Ʈ
COMMON_STRING_TAEKWONDO		= PreCreateString_1047		-- �±ǵ�
COMMON_STRING_BOXING		= PreCreateString_1048		-- ����
COMMON_STRING_CAPOERA		= PreCreateString_1049		-- ī������
COMMON_STRING_MUAYTHAI		= PreCreateString_1050		-- ����Ÿ��
COMMON_STRING_RUSH			= PreCreateString_1051		-- ����
COMMON_STRING_JUDO			= PreCreateString_1052		-- ����
COMMON_STRING_PROWRESTLING	= PreCreateString_1053		-- ���η�����
COMMON_STRING_HAPGIDO		= PreCreateString_1054		-- �ձ⵵
COMMON_STRING_SAMBO			= PreCreateString_1055		-- �ﺸ
COMMON_STRING_DIRTYX		= PreCreateString_2456		-- ��Ƽ����
COMMON_STRING_SUMO			= PreCreateString_3462		-- ����(�̳Ѹ�)
COMMON_STRING_KUNGFU		= PreCreateString_4344		-- ��Ǫ
COMMON_STRING_NINJA			= PreCreateString_4920		-- ����		



ITEMKIND_COSTUM							= 0
ITEMKIND_SKILL							= 1
ITEMKIND_TITLE							= 5
ITEMKIND_RIDE							= 401
ITEMKIND_EXCHANGE_SKILL					= 6
ITEMKIND_EXPERIENCE_PROMOTION			= 13
ITEMKIND_TRANSFORM						= 9
ITEMKIND_RIGHT_REVIVE					= 20 -- 10000020 ���� ��Ȱ
ITEMKIND_LIFE							= 21 -- 10000021 ������
ITEMKIND_SLOT_CHANGER					= 22 -- 10000022 ���� ����
ITEMKIND_ACADE_TICKET					= 23 -- 10000023 �����̵� Ƽ��
ITEMKIND_HOTPICKS						= 24 -- ���Ƚ�
ITEMKIND_SKILL_STRENGTHEN				= 25 -- ��ų ��ȭ
ITEMKIND_SUPER_OWNER					= 26 -- ���� ����
ITEMKIND_PREMIUM_ACADE_TICKET			= 27 -- �����̵� �����̾� ����
ITEMKIND_ENEMY_SP_VIEW					= 28 -- ����� SP ����
ITEMKIND_ENEMY_ITEM_VIEW				= 29 -- ����� ������ ����
ITEMKIND_RESET_PLAY_RECORD				= 30 -- ���� �����ϱ�
ITEMKIND_CHANGE_CHARACTER_NAME_COLOR	= 31 -- ĳ���� �̸��� �����ϱ�
ITEMKIND_CHANGE_CHARACTER_NAME			= 32 -- ĳ���� �̸� �����ϱ�
ITEMKIND_CAPSULE						= 33 -- ĸ��
ITEMKIND_GAMERESULT_BUFF				= 34 -- ���� ��� ����
ITEMKIND_GAMEPLAY_BUFF					= 35 -- ���� �÷��� ���� value[0]�� ���۹�ȣ , value[1] �� ���� ��
ITEMKIND_ITEM_GENERATE					= 36 -- �������� �����Ѵ�. value[0]�� ������Ÿ�� ��ȣ, value[4]�� ������ ���ð� �ִ´�.
ITEMKIND_EXTEND_BATTLE_TIME				= 37 -- �����ð�����
ITEMKIND_DETACH_ORB						= 38 -- ���Ƚ� ����
ITEMKIND_CHANGE_EMBLEM					= 39 -- ������ ��ü
ITEMKIND_SPECIAL_MYSHOP					= 40 -- ����� ��
ITEMKIND_DIG_TOOL						= 41 -- ���ı� ������
ITEMKIND_CHAT_BUBBLE					= 42 -- ��ǳ�� ������
ITEMKIND_MEGA_PHONE						= 43 -- �ް���
ITEMKIND_INCREASE_NAX_GUILD_MEMBER		= 44 -- ��� ��� ���ڸ� �ø���.
ITEMKIND_CHARACTER_COSTUME_SWITCH		= 45 -- ���Ϲ��� �����
ITEMKIND_COSTUME_RANDOM_BOX				= 46 -- �ڽ�Ƭ �����ڽ�
ITEMKIND_SLOT_MACHINE_CHIP				= 47 -- ���Ըӽ�Ĩ
ITEMKIND_COSTUME_MIXING_CUBE			= 48 -- �ڽ�Ƭ ���� ť��
ITEMKIND_SHOW_USERINFO_INROOM			= 49 -- ��Ʋ�� �ȿ� �ִ� �������� ����
ITEMKIND_REGIST_PROFILE_PHOTO			= 50 -- ������ �������
ITEMKIND_CHANGE_PROFILE_SKIN			= 51 -- ������ ��Ų����
ITEMKIND_GANG_WAR_LETTER				= 52 -- ������ ��õ��
ITEMKIND_ODDMENTS						= 53 -- �⵿��� ������
ITEMKIND_FIRECRACKER					= 54 -- ���׾�����
ITEMKIND_DIRTYX_CHANGECLASS_VISION		= 55 -- ��Ƽ���� ���� ���� ������
ITEMKIND_POTION							= 56 -- ����Ϳ� ����
ITEMKIND_RESET_CLASS					= 57 -- Ŭ���� ����
ITEMKIND_STORAGE_EXTEND					= 58 -- ������ Ȯ�� ������
ITEMKIND_UPGRADE_ITEM_STUFF				= 59 -- ������ ���׷��̵� �ֹ���
ITEMKIND_CHANGE_CHARACTER_COLOR			= 60 -- ĳ���� ���� �ٲٱ�
ITEMKIND_CHANGE_PROMOTION_LEVEL			= 61 -- ������ ���� �ٲٱ�
ITEMKIND_DISCOUNT_COUPON				= 62 -- ĳ����������
ITEMKIND_SELECT_RANDOMBOX				= 63 -- ���÷����ڽ�
ITEMKIND_ATTRIBUTE_ITEM					= 64 -- �Ӽ��ο� ������
ITEMKIND_CHARACTER_ATTRIBUTE_ITEM		= 65 -- ĳ���� �Ӽ��ο� ������
ITEMKIND_MYSHOP_VIEW_ITEM				= 66 -- ���̼� ���
ITEMKIND_BEST_FRIEND_EXTEND				= 67 -- ��ģ Ȯ���
ITEMKIND_BEST_FRIEND_DELETE				= 68 -- ��ģ ����
ITEMKIND_UPGRADE_STAT_RESET				= 69 -- ���� ���� �ʱ�ȭ������
ITEMKIND_CHARACTER_STAT_PLUS			= 70 -- ĳ���� ���� ���� ������
ITEMKIND_USE_UNSEAL_SKILL_TRADE			= 71 -- ��ų �ŷ� ���εȰ� �����Ѵ�.
ITEMKIND_USE_UNSEAL_SKILL				= 72 -- ��ų ���εȰ� �����Ѵ�.( ���׷��̵��ϴٰ� �ı��Ȱ���̴�.)
ITEMKIND_PROTECT_SKILL_DOWN_GRADE		= 73 -- 
ITEMKIND_AVATAR_CLEANUP					= 74 -- �̹����� �ƹ�Ÿ �ڽ�Ƭ Ŭ����������
ITEMKIND_DETACH_AVATAR					= 75 -- �ƹ�Ÿ�� �и��Ҷ� ����
ITEMKIND_UNMAKE_AVATAR					= 76 -- Ŭ�� �ƹ�Ÿ�� �Ϲ� �ƹ�Ÿ�� ��ȯ�ϴ� ������
ITEMKIND_USE_INJECTER					= 77 -- �����͸� �̿��ؼ� ����ġ�� �����ϴ� ������
ITEMKIND_USE_EXP_BOTTLE					= 78 -- ����ġ�� ��� ���� ���
ITEMKIND_DECO_UPGRADE_SPERIUM   		= 79
ITEMKIND_AUTOTAKE_RENTAL_SKILL			= 80
ITEMKIND_LEVEL_JUMPING					= 85
ITEMKIND_PREMIUM_PACKAGE				= 100-- �����̾� ��Ű��
ITEMKIND_COSTUME_DURATION_BOX			= 146-- �ڽ�Ƭ ������ ��¥ ����
ITEMKIND_COSTUME_STAT_CHANGE			= 400 -- �ڽ�Ƭ ���� ü����


BATTLETYPE_NORMAL		= 0	-- �Ϲ����� ��Ʋ
BATTLETYPE_EXTREME		= 1	-- �ͽ�Ʈ�� ���
BATTLETYPE_GUILD_BATTLE	= 2	-- ��� ��Ʋ
BATTLETYPE_FULL_SKILL	= 3	-- ������ �̺�Ʈ ���
BATTLETYPE_GM_CHANNEL	= 5	-- GMä��
BATTLETYPE_CHAMPIONSHIP = 200 -- ��ȸä��

-- ���� �÷��� ���
PLAYMODE_DEFAULT		= 0
PLAYMODE_GAME			= 1
PLAYMODE_PRACTICE		= 2
PLAYMODE_QUEST			= 3
PLAYMODE_CHANGECLASS	= 4
PLAYMODE_MONSTER_RACING	= 5
PLAYMODE_GANGWAR		= 6
PLAYMODE_DUAL			= 7

-- ���� ä�� ����

WND_LUA_SELECTCHANNEL = 0
WND_LUA_LOBBY = 1
WND_LUA_BATTLEROOM = 2
WND_LUA_MYROOM = 3
WND_LUA_ITEMSHOP = 4
WND_LUA_SKILLSHOP = 5
WND_LUA_CREATECHARACTER = 6
WND_LUA_GAMELOADING = 7
WND_LUA_GAME = 8
WND_LUA_GAMERESULT = 9
WND_LUA_RANK = 10
WND_LUA_PRACTICE = 11
WND_LUA_VILLAGE = 12
WND_LUA_QUESTLOBBY = 13
WND_LUA_QUESTROOM = 14
WND_LUA_QUEST = 15
WND_LUA_QUESTRESULT = 16
WND_LUA_QUESTLOADING = 17
WND_LUA_CHANGECLASS = 18
WND_LUA_LOGIN = 19
WND_LUA_COUNT = 20
WND_LUA_CLUBLOBBY = 21
WND_LUA_SELECTCHARACTER = 22
WND_LUA_AUTOMATCHLOBBY = 23
WND_LUA_ZOMBIE_DEFENCE = 25




-- ���� ������ ����Ʈ�� ��
CommonTAB_COSTUME		= 0
CommonTAB_SKILL			= 1
CommonTAB_ETC			= 2
CommonTAB_STRENGTHEN	= 3
CommonTAB_CASH			= 4
CommonTAB_COUNT			= 5


-- ���� ������ : ���� ����Ʈ ��� ���� ��
ITEMLIST_INVENTORY			= 0
ITEMLIST_STORAGE			= 1
ITEMLIST_EMAIL				= 2
ITEMLIST_DEAL				= 3	
ITEMLIST_MYSHOP				= 4
ITEMLIST_MYROOM				= 5
ITEMLIST_AVATAR_POWUP		= 6
ITEMLIST_AVATAR_MIX 		= 7
ITEMLIST_ITEM_CRAFTING 		= 8
ITEMLIST_CLONE_AVATAR 		= 9
ITEMLIST_SKILL_UP 			= 10
ITEMLIST_ORB 				= 11
ITEMLIST_NPC_SHOP 			= 12
ITEMLIST_RANDY_HEART_BOOK	= 13
ITEMLIST_CLONE_SET_VISUAL	= 14
ITEMLIST_CLONE_SEPARATE		= 15
ITEMLIST_CLONE_CLEAN		= 16
ITEMLIST_CLONE_RESTORE		= 17

ITEM_TAP_ZEN		= 1
ITEM_TAP_SKILL		= 2
ITEM_TAP_STUFF		= 3
ITEM_TAP_UP			= 4
ITEM_TAP_CASH		= 5

-- Modify by Jiyuu
NFREE_MAX_SKILL_UPGRADE_LEVEL = 10

-- ��޿� ���� ������ ǥ��
local LevelColor1	= {['protecterr'] = 0, 150, 150, 150}
local LevelColor2	= {['protecterr'] = 0, 0, 114, 255}
local LevelColor3	= {['protecterr'] = 0, 202, 19, 255}
local LevelColor4	= {['protecterr'] = 0, 254, 153, 51}
-- Modify by jiyuu
tGradeTexTable		= {['protecterr'] = 0, 77, 77, 77, 106, 106, 106, 135, 135, 135, 164,
										164, 164, 164, 164, 164, 164, 164, 164, 164, 164 }	-- ��ų ���׷��̵� ��� �׵θ� ����
										
tGradeTextColorTable= {['protecterr'] = 0, LevelColor1, LevelColor1, LevelColor1,
															LevelColor2, LevelColor2, LevelColor2,
															LevelColor3, LevelColor3, LevelColor3,
															LevelColor4,
															LevelColor4, LevelColor4, LevelColor4,
															LevelColor4, LevelColor4, LevelColor4, 
															LevelColor4, LevelColor4, LevelColor4, 
															LevelColor4 }
															
--tGradeTexTable		= {['protecterr'] = 0, 77, 77, 77, 106, 106, 106, 135, 135, 135, 164}	-- ��ų ���׷��̵� ��� �׵θ� ����
--tGradeTextColorTable= {['protecterr'] = 0, LevelColor1, LevelColor1, LevelColor1,
--															LevelColor2, LevelColor2, LevelColor2,
--															LevelColor3, LevelColor3, LevelColor3,
--															LevelColor4}
									
-- ��Ʈ���� ���־��ִ� ���̺�						
tSpecialColorTable = {['err']=0, [0] = {['err']=0, [0]= 240, 240, 240}
									, {['err']=0, [0]= 35,  255, 97}		-- ���		1
									, {['err']=0, [0]= 255, 213, 28}		-- ��Ȳ��	2
									, {['err']=0, [0]= 142, 236, 255}		-- �ϴû�	3
									, {['err']=0, [0]= 255, 43, 71}			-- ������	4
									, {['err']=0, [0]= 230, 111, 208}		-- ��ȫ��	5
									, {['err']=0, [0]= 255, 198, 0}			-- �����	6
									, {['err']=0, [0]= 53, 191, 255}		-- �Ķ���	7
									}

-- ������ ���� �̹���.
-- ������ ���õ� �̹����� ǥ�����ַ���(3���� ������ �ʿ��ϴ�)
-- ����, ��Ÿ��, �Ӽ� �ε���
local attributeTexX = {[0] = 178, 267, 267, 267, 267 }

local attributeTexY = {[0] = 0, 35, 70, 105, 0}
local attributeTexY2= {[0] = 35, 35, 70, 105, 0}
local attributeTexY3= {[0] = 70, 35, 70, 105, 0}

promotionImgTexXTable = {[0] = 0, 89, 0}										-- key���� styleIndex
promotionImgTexYTable = {[0] = 0, 35, 70, 105, 140, 175, 210, 245, 280, 315}			-- key���� promotionIndex

tAttributeImgTexXTable = {[0]= attributeTexX, attributeTexX, attributeTexX}		-- ù��° key�� : styleIndex, �ι�° key�� : attributeIndex
tAttributeImgTexYTable = {[0]= attributeTexY, attributeTexY2, attributeTexY3}	

tStyleTexX = {['err'] = 0, [0]=497, 585, 497, 585, 497, 585, 497, 585, 497, 585, 497, 585}
tStyleTexY = {['err'] = 0, [0]=  0,   0,  35,  35,  70,  70, 105, 105, 140, 140, 175, 175}



-- ���� �̸� �ؽ�Ʈ
tStatNameText = {['protecterr']=0, PreCreateString_1122, PreCreateString_1123, PreCreateString_1124, "HP", "SP", PreCreateString_1125, PreCreateString_1126, PreCreateString_2646
											, PreCreateString_2648, PreCreateString_2650, PreCreateString_2647, PreCreateString_2649, PreCreateString_2651, PreCreateString_2652 }
											
--------------------------------------------------------------------

-- ��ǳ�� ��������

--------------------------------------------------------------------
TEXT_COLOR_WHITE	= {["err"]=0, 255, 255, 255}
TEXT_COLOR_BLACK	= {["err"]=0, 0, 0, 0}
TEXT_COLOR_GOLD		= {["err"]=0, 255, 227, 86}
TEXT_COLOR_YELLOW	= {["err"]=0, 255, 187, 41}


-- ��ǳ��
tChatBubbleTexX  = {["err"]=0, [0]=1,	56,		111,	
								   1,	56,		111,	
								   1,	56,		111,	
								   1,	56,     111,
								   1,	56,     111,
								   1,	56,     111,
								   1,	56,     111,
								   1,	56,     111,
								   1,	56,     111,
								   1,	56,     111,
								   1,	56,     111}
								   
tChatBubbleTexY  = {["err"]=0, [0]=1,	1,		1,		
								   56,	56,		56,		
								   111,	111,	111,	
								   166,	166,  166,
								   221, 221,  221,
								   276, 276,  276,
								   331, 331,  331,
								   386, 386,  386,
								   441, 441,  441,
								   496, 496,  496,
								   551, 551,  551}
								   
								  						   

tChatBubblePosY  = {["err"]=0, [0]=3,	-1,		2,		
								1,		1,		1,		
								0,		0,		0,		
								1,		-1,     0,
								1,		-1,    -1,
								0,		0,		0,		
								0,		0,		0,		
								0,		0,		0,		
								0,		0,		0,		
								0,		0,		0,		
								0,		0,		0}
								
tChatBubbleColor = {["err"]=0, [0]=1,	0,		2,		
								1,		0,		3,		
								1,		1,		1,		
								0,		0,       0,
								1,		0,       0,
								0,		0,       0,
								0,		0,       0,
								0,		0,       0,
								0,		0,       0,
								0,		0,       0,
								0,		0,       0,
								0,		0,       0}


function GetChatBubbleColor(type)
	local colorType = tChatBubbleColor[type]
	local tColor = {["err"]=0, }
	if colorType == 0 then		tColor = TEXT_COLOR_WHITE
	elseif colorType == 1 then	tColor = TEXT_COLOR_BLACK
	elseif colorType == 2 then	tColor = TEXT_COLOR_GOLD
	elseif colorType == 3 then	tColor = TEXT_COLOR_YELLOW
	end
	return tColor[1], tColor[2], tColor[3]
end

-- ��ǳ�� ����
tChatBubbleTailTexX		= {["err"]=0, [0]=166,	184,	202,	
										166,	184,	202,	
										166,	184,	202,	
										166,	184,    202,
										166,	184,    202,
										166,	184,    202,
										166,	184,    202,
										166,	184,    202,
										166,	184,    202,
										166,	184,    202,
										166,	184,    202}

tChatBubbleTailTexY		= {["err"]=0, [0]=37,	37,		37,		
										92,		92,		92,		
										147,	147,	147,	
										202,	202,    202,
										257,	257,	257,
										312,	312,	312,
										367,	367,	367,
										422,	422,	422,
										477,	477,	477,
										532,	532,	532,
										587,	587,	587}


tChatBubbleTailPosY		= {["err"]=0, [0]=0,	3,		0,		
										0,		0,		0,		
										0,		0,		0,		
										0,		0,      0,
										0,		0,      0,
										0,		0,      0,
										0,		0,      0,
										0,		0,      0,
										0,		0,      0,
										0,		0,      0,
										0,		0,      0 }
										
tChatTextPosY			= {["err"]=0, [0]=5,	6,		5,		
										5,		5,		3,		
										5,		5,		5,		
										4,		3,      5, 
										4,		4,      4, 
										4,		4,      4, 
										4,		4,      4, 
										4,		4,      4, 
										4,		4,      4, 
										4,		4,      4, 
										4,		4,      4, 
										4,		4,      4 }
										
MAX_CHAT_BUBBLE_NUM		= #tChatBubbleTexX



-- Īȣ�� �̹���
tTitleTexX	  = {['err']=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
							0, 0, 0, 0, 0, 0, 0, 0, 0, 0,	
							0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
							0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
							0, 0, 0, 110, 110, 0, 0, 0, 0, 0,
							0, 0, 0, 0, 110, 110, 110, 220, 220, 220, 
							330, 330, 330, 0 , 0 , 0, 0, 0, 0, 0,
							0, 0, 0, 110, 110, 110, 110, 110, 110, 110, 
							110, 110, 0, 0, 0, 0, 0, 110, 110, 110, 
							110, 110, 110, 110, 0,
							0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
							0, 0}
							--110, 110, 110, 110}
							
tTitleTexY	  = {['err']=0, 201, 222, 243, 264, 285, 306, 327, 348, 369, 390,
							411, 432, 453, 474, 495, 516, 537, 558, 579, 600,
							621, 642, 663, 684, 705, 726, 810, 831, 852, 873,
							894, 0,	18, 36, 54, 72, 90, 108, 126, 144,
							162, 180, 198, 0, 18, 216, 234, 252, 72, 90, 
							108, 126, 915, 270, 216, 234, 252, 216, 234, 252, 
							216, 234, 252, 288, 0,	0, 0, 0, 0, 935,
							162, 180, 198, 36, 54, 90, 72, 108, 126, 144, 
							162, 198, 306, 324, 342, 360, 378, 270, 288, 306,
							324, 342, 360, 378, 0,
							162, 0, 18, 36, 54, 72, 90, 108, 126, 144,  180, 198,
							18, 36}
							--324, 342, 360, 378 }
							
tTitleSizeY	  = {['err']=0, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,
							21, 21, 21, 21, 21, 21, 21, 21, 21, 21,
							21, 21, 21, 21, 21, 21, 21, 21, 21, 21,
							21, 18, 18, 18, 18, 18, 18, 18, 18, 18,
							18, 18, 18, 18, 18, 18, 18, 18, 18, 18,
							18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 
							18, 18, 18, 18, 18, 18, 18, 18, 18, 20,
							18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 
							18, 18, 18, 18, 18, 18, 18, 18, 18, 18,
							18, 18, 18, 18, 18,
							18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18,
							18, 18}
							--18, 18, 18, 18}
							
tTitleFilName = {['err']=0, "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga"--5
							, "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga"--10
							, "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga"--15
							, "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga"--20
							, "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga"--25
							, "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga", "numberUi001.tga"--30
							, "numberUi001.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--35
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--40
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--45
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--50
							, "numberUi002.tga", "numberUi002.tga", "numberUi001.tga", "numberUi002.tga", "numberUi002.tga"--55
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--60
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--65
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi001.tga"--70
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--75
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--80
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--85
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"--90
							, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi003.tga"--95
							, "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga", "numberUi004.tga"
							, "numberUi003.tga", "numberUi003.tga"}
							--, "numberUi002.tga", "numberUi002.tga", "numberUi002.tga", "numberUi002.tga"}
							
-- �ִϸ��̼��� �ִ� Īȣ
tAniTitleFrame    = 0
tAniDelay		  = 0
tAniTitleTexX	  = {['err']=0, [0] = 0, 110, 220, 330, 440, 550, 0, 110, 220, 330, 660, 770, 880, 550, 440, 660, 770, 660, 770, 0, 110, 220, 330}
tAniEndFrame	  = {['err']=0, [0] = 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630, 630,630,630}
tAniTitleFilName  = {['err']=0, [0] = "nick.tga", "nick.tga", "nick.tga", "nick.tga", "nick.tga", "nick.tga", "nick_002.tga",
									  "nick_002.tga", "nick_002.tga", "nick_002.tga", "nick.tga", "nick.tga", "nick.tga",
									  "nick_002.tga", "nick_002.tga", "nick_002.tga", "nick_002.tga", "nick_002.tga", "nick_002.tga", 
									  "numberUi005.tga",
									  "numberUi005.tga","numberUi005.tga","numberUi005.tga"}

function SetAniTitleFrame(NowFrame)
	tAniTitleFrame = NowFrame
end

------------------------------------------------------------------------------------------------------------------------------------------------
-- ä�� â �۾� �� ����( 1: �ڽ�(���), 0: �ҹ�ä��(����), 1:�Ϲ�ä��(���), 2:��ä��(�Ķ���), 3:�ӼӸ�(���), 4:��ä��(�����), 5:�ý���ä��()
------------------------------------------------------------------------------------------------------------------------------------------------
-- �ѱ����� ����Ʈ�ڽ� ���� 12
-- �±����� ����Ʈ�ڽ� ���� 14
g_editSize = 12
if IsKoreanLanguage() then
	g_editSize = 12
else
	g_editSize = 14
end

-- 1: �ڽ�(���)
ChatMySelfFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,255,255,255,    1,    0,0,0,255 }

-- 0: �ҹ�ä��(����)
ChatWarnningFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   254,87,87,255,      1,    0,0,0,255 }

-- 1:�Ϲ�ä��(���)
ChatNormalFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,255,255,255,    1,    0,0,0,255 }

-- 2:��Ƽä��(�Ķ���)
ChatPartyFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,    120,200,255,255,    1,    0,0,0,255 }

-- 3:�ӼӸ�(���)
ChatWhisperFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   102,204,102,255,    1,    0,0,0,255 }

-- 4:��ä��(�����)
ChatTeamFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,    97,161,240,255,    1,    0,0,0,255 }

-- 5:�ý��� �˸� ��������(�ݻ�)
ChatSystemFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,204,0,255,    1,    0,0,0,255 }

-- 6:�ý��� �˸�2 (�ݻ�)
ChatSystem2FontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,204,0,255,    1,    0,0,0,255 }

-- 7:Ŭ��ä��(�����ֻ�)
ChatGangFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   250,120,250,255,    1,    0,0,0,255 }

-- 8:�ް���(�Ķ���)
ChatMegaPhoneFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   112,255,253,255,    1,    0,0,0,255 }

-- 8:������(��ȸ��)
ChatObserverFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   220,220,220,255,    1,    0,0,0,255 }

-- 10:����ȸް���(�����)
ChatSpecialMegaPhoneFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,255,0,255,    1,    0,0,0,255 }

-- ZM
SpecialZMFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,243,5,255,    1,    0,0,0,255 }

-- Sultan
SpecialSultanFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,204,0,255,    1,    0,0,0,255 }

--GM
ChatGMFontData = {['protecterr'] = 0, 
g_STRING_FONT_GULIMCHE,g_editSize,   255,0,0,255,    1,    0,0,0,255 }

tCommonChatFontData = {[0]=ChatWarnningFontData, ChatNormalFontData, ChatPartyFontData, ChatWhisperFontData, ChatTeamFontData
						, ChatSystemFontData, ChatSystem2FontData, ChatGangFontData, ChatMegaPhoneFontData, ChatObserverFontData
						, ChatSpecialMegaPhoneFontData}

g_MAIN_WIN_SIZEX		= 1024
g_MAIN_WIN_SIZEY		= 768


g_CURRENT_WIN_SIZEX, g_CURRENT_WIN_SIZEY = GetCurrentResolution()

local tColorGrade1	= {['err'] = 0, 200, 200, 200}
local tColorGrade2	= {['err'] = 0, 26, 255, 58}
local tColorGrade3	= {['err'] = 0, 7, 150, 252}
local tColorGrade4	= {['err'] = 0, 255, 74, 255}
local tColorGrade5	= {['err'] = 0, 255, 170, 0}

-- ���� �׼������� ������ �����ش�.
function ColorToMoney(money)
	local	tColor	= {['err'] = 0, }
	
	if		money >= 100000000 then		tColor = tColorGrade5
	elseif	money >= 10000000 then		tColor = tColorGrade4
	elseif	money >= 1000000 then		tColor = tColorGrade3
	elseif	money >= 100000 then		tColor = tColorGrade2
	else								tColor = tColorGrade1
	end
	return tColor[1], tColor[2], tColor[3]
end


function common_DrawOutlineText1(drawer
		, text, posX, posY
		, outlineR,  outlineG, outlineB, outlineA
		, textR, textG, textB, textA, WideType)	
	
	drawer:setTextColor(outlineR, outlineG, outlineB, outlineA)
	
	drawer:drawText(text, posX - 1, posY - 1, WideType)
	drawer:drawText(text, posX - 1, posY + 0, WideType)
	drawer:drawText(text, posX - 1, posY + 1, WideType)
	drawer:drawText(text, posX + 0, posY - 1, WideType)
	drawer:drawText(text, posX + 0, posY + 1, WideType)
	drawer:drawText(text, posX + 1, posY - 1, WideType)
	drawer:drawText(text, posX + 1, posY + 0, WideType)
	drawer:drawText(text, posX + 1, posY + 1, WideType)
	
	drawer:setTextColor(textR, textG, textB, textA)		
	drawer:drawText(text, posX, posY, WideType)

end






function common_DrawOutlineText2(drawer
		, text, posX, posY
		, outlineR,  outlineG, outlineB, outlineA
		, textR, textG, textB, textA, WideType)	
	
	drawer:setTextColor(outlineR, outlineG, outlineB, outlineA)
	
	drawer:drawText(text, posX - 2, posY - 1, WideType)
	drawer:drawText(text, posX - 2, posY - 0, WideType)
	drawer:drawText(text, posX - 2, posY + 1, WideType)
	drawer:drawText(text, posX - 1, posY - 2, WideType)
	drawer:drawText(text, posX - 1, posY - 1, WideType)
	drawer:drawText(text, posX - 1, posY + 0, WideType)
	drawer:drawText(text, posX - 1, posY + 1, WideType)
	drawer:drawText(text, posX - 1, posY + 2, WideType)
	drawer:drawText(text, posX + 0, posY - 2, WideType)
	drawer:drawText(text, posX + 0, posY - 1, WideType)
	drawer:drawText(text, posX + 0, posY + 1, WideType)
	drawer:drawText(text, posX + 0, posY + 2, WideType)
	drawer:drawText(text, posX + 1, posY - 2, WideType)
	drawer:drawText(text, posX + 1, posY - 1, WideType)
	drawer:drawText(text, posX + 1, posY + 0, WideType)
	drawer:drawText(text, posX + 1, posY + 1, WideType)
	drawer:drawText(text, posX + 1, posY + 2, WideType)
	drawer:drawText(text, posX + 2, posY - 1, WideType)
	drawer:drawText(text, posX + 2, posY - 0, WideType)
	drawer:drawText(text, posX + 2, posY + 1, WideType)
	
	drawer:setTextColor(textR, textG, textB, textA)
	drawer:drawText(text, posX, posY, WideType)

end



-- ó���� ������ ȣ������� �Ѵ�.
function EnableDrawer()
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12);
	drawer:setTextColor(255,255,255,255)
end




-- �α����
function DrawLog(x, y, message)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()	
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
	drawer:setTextColor(200, 100, 70 ,255)
	drawer:drawText(message, x, y)
end



function DebugStr(args)
	Lua_DebugStr(args)
end

------------------------------------------------------------------------

-- ��������

------------------------------------------------------------------------
function DrawNotifyMessage(sort, message1, message2, message3)
	
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
		
	drawer:setFont(g_STRING_FONT_GULIMCHE, 16);
	drawer:setTextColor(255,255,255,255)	
	local y = 60
	
	drawer:drawTexture("UIData/Arcade_lobby.tga", 0, y, 1024, 112, 0, 885, 5)
			
	if sort == 1 then
		--local x = 242
		local x = 150
		common_DrawOutlineText2(drawer, message1, x,  y+24, 0,0,0, 255, 255,205,86,255, 5)
		common_DrawOutlineText2(drawer, message2, x,  y+48, 0,0,0, 255, 255,205,86,255, 5)
		common_DrawOutlineText2(drawer, message3, x,  y+72, 0,0,0, 255, 255,205,86,255, 5)
		drawer:drawTexture("UIData/Arcade_lobby.tga", x-106, y+8, 103, 93, 313, 94, 5, 5)
		
	elseif sort == 8 then
		local x1 = GetStringSize(g_STRING_FONT_GULIMCHE, 16, message1)
		common_DrawOutlineText2(drawer, message1, 530-x1/2,  y+24, 0,0,0, 255, 255,205,86,255, 5)
		local x2 = GetStringSize(g_STRING_FONT_GULIMCHE, 16, message2)
		common_DrawOutlineText2(drawer, message2, 530-x2/2,  y+48, 0,0,0, 255, 255,205,86,255, 5)
		local x3 = GetStringSize(g_STRING_FONT_GULIMCHE, 16, message3)
		common_DrawOutlineText2(drawer, message3, 530-x3/2,  y+72, 0,0,0, 255, 255,205,86,255, 5)
		
		local x = x1
		if x < x2 then
			x = x2
		end
		if x < x3 then
			x = x3
		end
		drawer:drawTexture("UIData/Arcade_lobby.tga", 530-x/2-106, y+8, 103, 93, 313, 94, 5)
		
	elseif sort == 9 then
		local x1 = GetStringSize(g_STRING_FONT_GULIMCHE, 16, message1)
		common_DrawOutlineText2(drawer, message1, 530-x1/2,  y+24, 0,0,0, 255, 255,205,86,255, 5)
		local x2 = GetStringSize(g_STRING_FONT_GULIMCHE, 16, message2)
		common_DrawOutlineText2(drawer, message2, 530-x2/2,  y+48, 0,0,0, 255, 255,205,86,255, 5)
		local x3 = GetStringSize(g_STRING_FONT_GULIMCHE, 16, message3)
		common_DrawOutlineText2(drawer, message3, 530-x3/2,  y+72, 0,0,0, 255, 255,205,86,255, 5)
	end
	
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
end




------------------------------------------------------------------------

-- �̺�Ʈ ��������

------------------------------------------------------------------------
function DrawNEventMessage(message)
	
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 20);
	drawer:setTextColor(255,255,255,255)
	
	local y = 60	
	drawer:drawTexture("UIData/Arcade_lobby.tga", 0, y, 1024, 112, 0, 885, 5)

	local x = GetStringSize(g_STRING_FONT_GULIMCHE, 20, message)
	common_DrawOutlineText2(drawer, message, 512-x/2, y+48, 0,0,0, 255, 255,205,86,255, WIDETYPE_5)
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
end


-- ���ʽ� Ÿ�� Money, EXP
function RenderBonusTime(str)
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12);
	drawer:setTextColor(255,255,255,255)
	common_DrawOutlineText2(drawer, str, 850, 46, 0,0,0, 255, 255,255,255,255, 1)
end

-- ���ʽ� Ÿ�� (Money And EXP)
function RenderBonusTimeMoneyAndEXP(str)
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12);
	drawer:setTextColor(255,255,255,255)
	common_DrawOutlineText2(drawer, str, 880, 46, 0,0,0, 255, 255,255,255,255, 1)
end


-- Ŭ���� ����
function RenderClubWarTime(min, sec)
	if CheckNpcModeforLua() == false then
		local tenMin = min / 10
		local CountMin = min - (tenMin * 10)
		
		local tensec = sec / 10
		local CountSec = sec - (tensec * 10)
	
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
		drawer:drawTexture("UIData/slot.tga", 415 , 565, 213, 31, 333, 845, 6);
		drawer:drawTexture("UIData/slot.tga", 450 , 600, 34, 48, 601+34*tenMin, 769, 6);
		drawer:drawTexture("UIData/slot.tga", 480 , 600, 34, 48, 601+34*CountMin, 769, 6);
		drawer:drawTexture("UIData/slot.tga", 505 , 600, 34, 48, 567, 769, 6);
		drawer:drawTexture("UIData/slot.tga",  526 , 600, 34 ,48, 601+34*tensec, 769, 6);
		drawer:drawTexture("UIData/slot.tga",  555 , 600, 34 ,48, 601+34*CountSec, 769, 6);
	end
end

-- ��Ű ī��Ʈ ��Ƽ �޼���.
function DrawLuckyCountMessage(type, LuckyCount, gran, name, itemName, fileName, kind)
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:drawTexture("UIData/Event_LuckyCount_villagePopup.tga", 0, 90, 1024, 116, 0, 0)	-- ����
	-- ���� ���ڸ� ǥ��
	if type == 1 then
		drawer:drawTexture("UIData/Event001.tga", 353, 106, 516, 88, 0, 811)	-- ���� ����
		-- 0 : 590    *39    -- ���� ���� ���� 65
		local TexXTerm = 39
		local PosXTerm = 65
		local CuttingNumber = LuckyCount
		local count  = 0

		while CuttingNumber > 0 do
			local number = CuttingNumber%10
			drawer:drawTexture("UIData/Event001.tga", 820-(count * PosXTerm), 117, 39, 60, 590 + (number*TexXTerm), 224)	-- ����
			count = count+1
			CuttingNumber = CuttingNumber/10		
		end
	-- ��Ű ī��Ʈ �̺�Ʈ�� ��÷�Ȼ���� �����ش�.
	elseif type == 2 then
		local winnerstring = PreCreateString_2339	--GetSStringInfo(LAN_LUCKY_FIGHTER_WINNER)	-- %s ���� %d��° ��Ű �����Ͱ� �Ǽ̽��ϴ�. 
		local winnerreward = PreCreateString_2340	--GetSStringInfo(LAN_LUCKY_FIGHTER_REWARD)	-- "%s"�� ���޵˴ϴ� 
		
		local String1 = string.format(winnerstring, CommatoMoneyStr(LuckyCount), name)
		local String2 = ""--string.format(winnerreward, itemName)
		if gran > 0 then
			String2 = string.format(winnerreward, CommatoMoneyStr(gran).." Zen")
			drawer:drawTextureSA("UIData/ItemUIData/item/Zen.tga", 363, 150, 128, 128, 0, 0,  100, 100,   255, 0, 0);	-- ����
		else
			String2 = string.format(winnerreward, itemName)
			if kind == ITEMKIND_SKILL then
				drawer:drawTextureSA("UIData/SkillUIData/"..fileName, 363, 150, 128, 128, 0, 0,  100, 100,   255, 0, 0);	-- ����
			else
				drawer:drawTextureSA("UIData/ItemUIData/"..fileName, 363, 150, 128, 128, 0, 0,  100, 100,   255, 0, 0);	-- ����
			end
		end
		drawer:setFont(g_STRING_FONT_GULIMCHE, 18);
		--drawer:setTextColor(255,255,255,255)
		common_DrawOutlineText2(drawer, String1, 363, 122, 0,0,0, 255, 255,205,86,255)
		common_DrawOutlineText2(drawer, String2, 415, 160, 0,0,0, 255, 255,205,86,255)				
	end	
end


function CountImage(count)
	 


end
-- ������ �������϶�
function DrawPause(bPause, index, name, pc0, pc1, pc2, pc3, pc4, pc5, pc6, pc7)
	
	if( bPause > 0 ) then	
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
		
		--[[
		if( index == 0) then			
			drawer:setTextColor(255, 255, 255, 255)
			drawer:setFont(g_STRING_FONT_GULIMCHE, 20)
			drawer:drawText("�������Դϴ�.", 20, 600)
		end
		--]]
		
		--[[
		baseX = 100 + (index % 4) * 100
		baseY = 150+ 200 + (index / 4) * 80
		
				
		drawer:setTextColor(0, 0, 255, 255)
		drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
		drawer:drawText(name, baseX, baseY)
		drawer:drawText(pc0, baseX +  0, baseY + 20)
		drawer:drawText(pc1, baseX + 20, baseY + 20)
		drawer:drawText(pc2, baseX + 40, baseY + 20)
		drawer:drawText(pc3, baseX + 60, baseY + 20)
		drawer:drawText(pc4, baseX +  0, baseY + 40)
		drawer:drawText(pc5, baseX + 20, baseY + 40)
		drawer:drawText(pc6, baseX + 40, baseY + 40)
		drawer:drawText(pc7, baseX + 60, baseY + 40)	
		--]]
	end	
	
end






-- SynkerStats
function DrawSynkerStats(progressCount, delayTick, compositionTick, timegab, up, down)
	
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setTextColor(255, 255, 255, 255)
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
		
	text = progressCount .. ' '.. 	delayTick .. ' ' .. compositionTick		
	common_DrawOutlineText1(drawer, text, 850,  160	, 0,0,0, 255, 255,255,255,255)
				
	text = timegab .. ' '.. 	up .. ' ' .. down
	common_DrawOutlineText1(drawer, text, 850,  180	, 0,0,0, 255, 255,255,255,255)
		
end






-- ��Ʈ��ũ ����ǥ��
function DrawNetworkStats(userIndex
	, packetType, normalSend, normalRecv, relaySend, relayRecv)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	
	offsetY = 210
	x = userIndex * 90 + 80
	y = packetType * 40 + offsetY
	
	drawer:setTextColor(255, 255, 255, 255)
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
	
	common_DrawOutlineText1(drawer,normalSend, x - 20, y-8, 0,0,0,255, 255,255,255,255)
	common_DrawOutlineText1(drawer,normalRecv, x + 20, y-8, 0,0,0,255, 255,255,255,255)
	common_DrawOutlineText1(drawer,relaySend,  x - 20, y+8, 0,0,0,255, 255,255,255,255)
	common_DrawOutlineText1(drawer,relayRecv,  x + 20, y+8, 0,0,0,255, 255,255,255,255)
	
	common_DrawOutlineText1(drawer,'input'		, 5,  0 * 40 + offsetY, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer,'request'	, 5,  1 * 40 + offsetY, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer,'test'		, 5,  2 * 40 + offsetY, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer,'relay'		, 5,  3 * 40 + offsetY, 0,0,0, 255, 255,255,255,255)	
	
	common_DrawOutlineText1(drawer,'ns nr'		, 900,  170 , 0,0,0, 255, 255,255,255,255)	
	common_DrawOutlineText1(drawer,'rs rr'		, 900,  190 , 0,0,0, 255, 255,255,255,255)
	
end







-- �ɸ��� ���� ǥ��
function DrawCharacterLog(userIndex, disconnected, relay
	, publicAddr, privatAddr, reachableAddr, newReachableAddr
	, hashValue1, hashValue2, hashValue3)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()

	x = 30
	y = userIndex * 14	
	
	common_DrawOutlineText1(drawer, disconnected	, x +   0, y, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer, relay			, x +  10, y, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer, publicAddr		, x +  20, y, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer, privatAddr		, x + 170, y, 0,0,0, 255, 255,255,255,255)	
	common_DrawOutlineText1(drawer, reachableAddr	, x + 320, y, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer, newReachableAddr, x + 470, y, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer, hashValue1		, x + 700, y, 0,0,0, 255, 255,255,255,255)
	common_DrawOutlineText1(drawer, hashValue2		, x + 800, y, 0,0,0, 255, 255,255,255,255)	
	common_DrawOutlineText1(drawer, hashValue3		, x + 900, y, 0,0,0, 255, 255,255,255,255)
	
end






-- ��Ʋ�� ��Ʈ��ũ ǥ��
function DrawNetworkSpeedInRoom(x, y, index, relay, speed)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
		
	speed = speed / 4
	minuswidth = (15 - speed) * 5
	if( minuswidth > 30) then
		minuswidth = 30
	end
	
	drawer:drawTexture("UIData/battleroom001.tga", x, y-1, 30 - minuswidth, 5, 0, 1017)
	
	--[[
	-- �������� ���
	if relay > 0 then
		drawer:setTextColor(0, 255, 255, 255)
		drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
		drawer:drawText("....", x+25, y+30)
	end
	--]]
	
	--[[
	settingOK = PlayManager_IsNetworkSettingOK(index)
	if( settingOK < 1 ) then
	
		drawer:setTextColor(0, 255, 255, 255)
		drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
		drawer:drawText("��Ʈ��ũ ������", x-39, y-24)
	
	end
	--]]
end






-- ���� ��Ʈ��ũ ǥ��
function DrawNetworkSpeedInGame(x, y, disconnected, relay, speed)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()

	--��żӵ� ǥ�����ֱ�
	local offset = 0
	if disconnected == 0 then
	
		if		 0 <= speed and speed <= 20 then	offset = 0
		elseif	20 <  speed and speed <= 40 then	offset = 5
		elseif	40 <  speed and speed <= 60 then	offset = 10
		elseif	60 <  speed and speed <= 80 then	offset = 15
		elseif	80 <  speed and speed <= 100 then	offset = 20
		else										offset = 20
		end
		drawer:drawTexture("UIData/GameNewImage.tga", x, y, 30-offset, 14, 227+offset, 65)
	end
end






--------------------------------------------------------------------

-- StartRender


-- �ɸ��Ϳ� �������� �׸���(HP, SP ...)

--------------------------------------------------------------------
g_MAX_PLAYER	= 32
tGhostTime		= { ["err"]=0, }
tDiePosX		= { ["err"]=0, }
tDiePosY		= { ["err"]=0, }
tAttackName1	= { ["err"]=0, }
tAttackName2	= { ["err"]=0, }
tGhostStart		= { ["err"]=0, }

for i=0, g_MAX_PLAYER-1 do
	tGhostTime[i] = 0
	tDiePosX[i] = 0
	tDiePosY[i] = 0
	tAttackName1[i] = ""
	tAttackName2[i] = ""
	tGhostStart[i] = false
end

function Common_StartGhost(downIndex, x, y, attackName1, attackName2)

	tGhostStart[downIndex]	= true
	tDiePosX[downIndex]		= x - 30
	tDiePosY[downIndex]		= y
	tGhostTime[downIndex]	= 0
	tAttackName1[downIndex]	= tostring(attackName1)
	tAttackName2[downIndex]	= tostring(attackName2)

end


function Common_EndGhost(downIndex)

	tGhostStart[downIndex]	= false
	tDiePosX[downIndex]		= 0
	tDiePosY[downIndex]		= 0
	tGhostTime[downIndex]	= 0
	tAttackName1[downIndex]	= ""
	tAttackName2[downIndex]	= ""
	
end


---------------------------------------------

-- ���� �׸��� �κ�

---------------------------------------------
function Common_RenderGhost(slot, x, y, deltaTime)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	
	if tGhostStart[slot] then
	
		tGhostTime[slot] = tGhostTime[slot] + deltaTime
		local changeGhost = tGhostTime[slot] / 8
		local nameY = 50		
		
		-- �Ϲ������� ���ϰ��
		if tAttackName2[slot] == "" then

			-- �����̹���
			drawer:drawTexture("UIData/GameNewImage.tga", x-64, tDiePosY[slot]-50-changeGhost, 119, 146, 728, 519)
			
			-- ���λ�� �̸�
			drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
			local nameSize = GetStringSize(g_STRING_FONT_GULIMCHE, 12, tAttackName1[slot])
			common_DrawOutlineText2(drawer, tAttackName1[slot], x-8-nameSize/2, tDiePosY[slot]-2-changeGhost+nameY, 0,0,0,255, 102,204,102,255)
			
		-- ���������� ���ϰ��
		else
			
			-- �����̹���
			drawer:drawTexture("UIData/GameNewImage.tga", x-64, tDiePosY[slot]-50-changeGhost, 119, 146, 847, 519)
			
			-- ���λ�� �̸�			
			drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
			local nameSize1 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, tAttackName1[slot])
			local nameSize2 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, tAttackName2[slot])
			common_DrawOutlineText2(drawer, tAttackName1[slot], x-8-nameSize1/2, tDiePosY[slot]-15-changeGhost+nameY, 0,0,0,255, 102,204,102,255)
			common_DrawOutlineText2(drawer, tAttackName2[slot], x-8-nameSize2/2, tDiePosY[slot]+2-changeGhost+nameY, 0,0,0,255, 102,204,102,255)
		end

	end

end



local g_eventTime3 = 0

-- 0:����, 1:����, 2:���ͷ��̽�, 3:������
local MODE_BATTLE = 0
local MODE_ARCADE = 1
local MODE_SURVIVAL = 2
local MODE_GANGWAR = 3
local MODE_GANGWAR_OBSERVER = 4
local MODE_DUAL = 5

lasthp		= { ["protectErr"]=0 }
lasthpTime	= { ["protectErr"]=0 }
lastsp		= { ["protectErr"]=0 }
lastspTime	= { ["protectErr"]=0 }

function Common_RenderCharacter
			( deltatime
			, myslot
            , myteam
			, slot
			, team
			, characterName
			, screenX
			, screenY
			, hp			
			, sp
			, maxhp
			, maxsp
			, friend
			, isPenalty
			, penaltyValue
			, BATTLE_MODE
			, showAllSP
			, showAllItem
			, _1stItemType
			, _2ndItemType
			, MONSTER_RACING
			, bArcadeEvent
			, exceptE
			, NameR
			, NameG
			, NameB
			)
			

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	
	if maxhp <= 0 then
		return
	end
	if maxsp <= 0 then
		maxsp = 3000
	end
	
	----------------------------------
	
	-- ��ȭ�ϰ� �ִ� ������ ���
	
	----------------------------------
	---------
	-- HP
	---------
	if (lasthp[slot] == nil) then
		lasthp[slot] = 0
	end
	
	if (lasthpTime[slot] == nil) then 
		lasthpTime[slot] = 0
	end
		
	lasthpTime[slot] = lasthpTime[slot] + deltatime
	changedHP		 = lasthpTime[slot] / 20
		
	lasthp[slot] = lasthp[slot] - changedHP
	
	if (lasthp[slot] < hp) then
		lasthp[slot] = hp
		lasthpTime[slot] = 0
	end
	
	---------
	-- SP
	---------
	if (lastsp[slot] == nil) then
		lastsp[slot] = 0
	end
	
	if (lastspTime[slot] == nil) then 
		lastspTime[slot] = 0
	end
				
	lastspTime[slot] = lastspTime[slot] + deltatime
	changedSP		 = lastspTime[slot] / 20

	lastsp[slot] = lastsp[slot] - changedSP	
	
	if (lastsp[slot] < sp) then
		lastsp[slot] = sp
		lastspTime[slot] = 0
	end
		
	
	
	----------------------------------

	-- �̴� HP ������

	----------------------------------
	local screenX	 = screenX - 40
	local realwidth  = 82
	local namewidth  = 1
	local nameheight = -5
	
	if hp >= maxhp then
		hp = maxhp
	end
	
	if lasthp[slot] >= maxhp then
		lasthp[slot] = maxhp
	end
	
	local computedHPrealwidth = hp * realwidth / maxhp
	local computedSPrealwidth = sp * realwidth / maxsp

	--�̴� ������ ����(��� sp�� ���ϰ��)
	if BATTLE_MODE == MODE_GANGWAR then
		if myteam == team then
			drawer:drawTexture("UIData/GameNewImage.tga", 0 + screenX+namewidth, 0 + screenY+nameheight, realwidth+4, 14, 603, 699)
		else
			drawer:drawTexture("UIData/GameNewImage.tga", 0 + screenX+namewidth, 0 + screenY+nameheight, realwidth+4, 7, 603, 699)
		end
	elseif BATTLE_MODE == MODE_GANGWAR_OBSERVER then
		drawer:drawTexture("UIData/GameNewImage.tga", 0 + screenX+namewidth, 0 + screenY+nameheight, realwidth+4, 14, 603, 699)
	else
		if slot < 8 then
			if showAllSP == 1 then
				drawer:drawTexture("UIData/GameNewImage.tga", 0 + screenX+namewidth, 0 + screenY+nameheight, realwidth+4, 14, 603, 699)
			else
			
				if myteam == team then
					drawer:drawTexture("UIData/GameNewImage.tga", 0 + screenX+namewidth, 0 + screenY+nameheight, realwidth+4, 14, 603, 699)
				else
					drawer:drawTexture("UIData/GameNewImage.tga", 0 + screenX+namewidth, 0 + screenY+nameheight, realwidth+4, 7, 603, 699)
				end
			end
		else
			drawer:drawTexture("UIData/GameNewImage.tga", 0 + screenX+namewidth, 0 + screenY+nameheight, realwidth+4, 7, 603, 699)
		end
	end
	
	--��ȭ �ϰ� �ִ� �̴� ������
	computedOldHPrealwidth = lasthp[slot] * realwidth / maxhp
	computedOldSPrealwidth = lastsp[slot] * realwidth / maxsp
		
	-- �Ʒ��� �ִ� HP��
	if myteam == team then
		drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 1 + screenY+nameheight, computedOldHPrealwidth, 8, 693, 769)
	else
		drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 1 + screenY+nameheight, computedOldHPrealwidth, 8, 605, 729)
	end
	
	-- SP��
	if BATTLE_MODE == MODE_GANGWAR then
		if myteam == team then
			drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedOldSPrealwidth, 8, 605, 745)
		end
	elseif BATTLE_MODE == MODE_GANGWAR_OBSERVER then
		drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedOldSPrealwidth, 8, 605, 745)
	else
		if slot < 8 then
			if showAllSP == 1 then
				drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedOldSPrealwidth, 8, 605, 745)
			else
				if myteam == team then
					drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedOldSPrealwidth, 8, 605, 745)
				end
			end
		end
	end
	
	-- ���Ƽ HP
	if isPenalty == 1 then
		local penaltyWidth = realwidth*(100-penaltyValue)/100
		local penaltyTexX = 935 + penaltyWidth
		local penaltyposX = 2 + screenX+namewidth + penaltyWidth
		local penaltySize = realwidth*penaltyValue/100
		drawer:drawTexture("UIData/GameNewImage.tga", penaltyposX, 1+screenY+nameheight, penaltySize+1, 8, penaltyTexX, 105)
	end
	
	-- ���� HP��
	if BATTLE_MODE == MODE_GANGWAR_OBSERVER then
		drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 1 + screenY+nameheight, computedHPrealwidth, 8, 605, 721)
	else
		if myteam == team then
			drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 1 + screenY+nameheight, computedHPrealwidth, 8, 693, 761)
		else
			drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 1 + screenY+nameheight, computedHPrealwidth, 8, 605, 721)
		end
	end
	
	--���� �̴� ������ 
	-- sp �׸���
	local LIMIT_Q = 1000
	local LIMIT_W = 2000
	local LIMIT_E = 3000
	if BATTLE_MODE == MODE_GANGWAR then
		if myteam == team then
			if( 0 <= sp and sp < LIMIT_Q ) then
				drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 745)
			elseif( LIMIT_Q <= sp and sp < LIMIT_W ) then
				drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 753)
			elseif( LIMIT_W <= sp and sp < LIMIT_E ) then
				drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
			elseif( LIMIT_E <= sp ) then
				-- E�ʻ�� ���ܸ�尡 �ƴҰ��� �������� �Ķ���, E�ʻ�� ���ܸ���� ��� �ʷϻ�
				if exceptE == 0 then
					drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 769)
				else
					drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
				end
			end
		end
	elseif BATTLE_MODE == MODE_GANGWAR_OBSERVER then
		if( 0 <= sp and sp < LIMIT_Q ) then
			drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 745)
		elseif( LIMIT_Q <= sp and sp < LIMIT_W ) then
			drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 753)
		elseif( LIMIT_W <= sp and sp < LIMIT_E ) then
			drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
		elseif( LIMIT_E <= sp ) then
			if exceptE == 0 then
				drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 769)
			else
				drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
			end
		end
	else
		
		if slot < 8 then
			if showAllSP == 1 then
				if( 0 <= sp and sp < LIMIT_Q ) then
					drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 745)
				elseif( LIMIT_Q <= sp and sp < LIMIT_W ) then
					drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 753)
				elseif( LIMIT_W <= sp and sp < LIMIT_E ) then
					drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
				elseif( LIMIT_E <= sp ) then
					if exceptE == 0 then
						drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 769)
					else
						drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
					end
				end
			else
				if myteam == team then
					if( 0 <= sp and sp < LIMIT_Q ) then
						drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 745)
					elseif( LIMIT_Q <= sp and sp < LIMIT_W ) then
						drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 753)
					elseif( LIMIT_W <= sp and sp < LIMIT_E ) then
						drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
					elseif( LIMIT_E <= sp ) then
						if exceptE == 0 then
							drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 769)
						else
							drawer:drawTexture("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 605, 761)
						end
					end
				end
				
			end
		end
	end
		
	-- �̺�Ʈ
	if bArcadeEvent == 1 then
		if slot == myslot then
			g_eventTime3 = g_eventTime3 + deltatime
			g_eventTime3 = g_eventTime3 % 60
			
			if g_eventTime3 < 30 then
				drawer:drawTextureA("UIData/GameNewImage.tga", 2 + screenX+namewidth, 8 + screenY+nameheight, computedSPrealwidth, 8, 693, 753, 200)
			end
		end
	end
	
	----------------------------------

	-- ĳ���Ͱ� ������ �ִ� ������

	----------------------------------
	local SHOW_Y = 45
	if MONSTER_RACING then
		SHOW_Y = 105
	end
	
	if showAllItem == 1 then
		if slot < 8 then
			if _1stItemType >= 0 then
				drawer:drawTexture("UIData/GameSlotItem.tga", 88+screenX+namewidth, screenY+nameheight, 14, 14, _1stItemType*14, SHOW_Y)
			end
			
			if _2ndItemType >= 0 then
				drawer:drawTexture("UIData/GameSlotItem.tga", 104+screenX+namewidth, screenY+nameheight, 14, 14, _2ndItemType*14, SHOW_Y)
			end
		end
	end
	
	----------------------------------

	-- �ɸ��� �̸�

	----------------------------------
	local FONT_SIZE = 12
	if IsKoreanLanguage() then
		FONT_SIZE = 11
	end
	drawer:setFont(g_STRING_FONT_GULIMCHE, FONT_SIZE)
	drawer:setTextColor(255, 255, 255, 255)
	
	local r=255
	local g=255
	local b=255
	
	-- ������ ���
	if BATTLE_MODE == MODE_BATTLE then
	
		-- ������ ���
		if friend < 8 then
			
			if team == 0 then
				r = 254; g = 87; b = 87;	-- ������
			elseif team == 1 then				
				r = 97;	g = 161; b = 240;	-- ������
			end
			
		else
	
			if slot == myslot then
				r = 51; g = 204; b = 51;
			else
				r = 255; g = 255; b = 255;
			end
		end
	
	-- ������ ���
	elseif BATTLE_MODE == MODE_ARCADE then

		if team == 0 then
			if slot == myslot then
				r = 51; g = 204; b = 51;
			else
				r = 153; g = 204; b = 204;
			end
		else
			--local or;
			--local og;
			--local ob;
			r, g, b = NameColorByMaxHP(maxhp)
			--DebugStr("NameR : " .. r .. "NameG : " .. g .. "NameB : " .. b);
			r = NameR
			g = NameG
			b = NameB
		end
	elseif BATTLE_MODE == MODE_SURVIVAL then
		
		-- ������ ���
		if friend < 8 then
			
			if team == 0 then
				r = 254; g = 87; b = 87;	-- ������
			elseif team == 1 then				
				r = 97;	g = 161; b = 240;	-- ������
			end
			
		else
	
			if slot == myslot then
				r = 51; g = 204; b = 51;
			else
				r = 255; g = 255; b = 255;
			end
		end
		
	elseif BATTLE_MODE == MODE_GANGWAR then
		if hp > 0 then
			if team == 0 then
				r = 254; g = 87; b = 87;	-- ������
			elseif team == 1 then
				r = 97;	g = 161; b = 240;	-- ������
			end
		else
			r = 200; g = 200; b = 200;	-- ������� ȸ��
		end
	
	elseif BATTLE_MODE == MODE_GANGWAR_OBSERVER then
		if hp > 0 then
			if team == 0 then
				r = 254; g = 87; b = 87;	-- ������
			elseif team == 1 then
				r = 97;	g = 161; b = 240;	-- ������
			end
		else
			r = 200; g = 200; b = 200;	-- ������� ȸ��
		end
	
	else
		-- ������ ���
		if friend < 8 then
			
			if team == 0 then
				r = 254; g = 87; b = 87;	-- ������
			elseif team == 1 then				
				r = 97;	g = 161; b = 240;	-- ������
			end
			
		else
	
			if slot == myslot then
				r = 51; g = 204; b = 51;
			else
				r = 255; g = 255; b = 255;
			end
		end
	end
	
	-- �̸�
	nameSize = GetStringSize(g_STRING_FONT_GULIMCHE, FONT_SIZE, characterName)
	common_DrawOutlineText1(drawer, characterName, screenX+42-nameSize/2, screenY-20, 0,0,0,255, r,g,b,255)
end





function NameColorByMaxHP(maxhp)

	local r = 255
	local g = 255
	local b = 255
		
	if 0 <= maxhp and maxhp < 3000 then
		g = 255
		b = 255
		
	elseif 3000 <= maxhp and maxhp < 12000 then
		g = 255 - ((maxhp*17)/1000)
		b = 255 - ((maxhp*17)/1000)
		
	else
		g = 0
		b = 0
	end
	
	return r, g, b
end





----------------------------------------------------

-- �׾��� �� �ٽ� �Ͼ�°� �׸���

----------------------------------------------------
local g_rightReviveTime = 0
local g_STRING_REVIVE_MSG = PreCreateString_1088	--GetSStringInfo(LAN_LUA_COMMON_1) -- ȸ���� �����ð����� �����Դϴ�
function Common_RenderReStart(deltatime, hp, RESPAWN_TIME, revivalTime, isGameOver, lifeCount, bFastRevive, rightRevive)
	if hp <= 0 and isGameOver == 0 then
		
		if lifeCount > 0 then
		
			-- ���� ������ LAND�϶����� count�� ���۵ȴ�.
			if revivalTime > 0 then
						
				-- ȸ���ϴ� â
				local realRevival = 221*revivalTime/RESPAWN_TIME
				
				-- ȸ�� ������
				drawer:drawTexture("UIData/GameNewImage.tga", 436, 527, realRevival, 9, 339, 23, WIDETYPE_7)
				
				drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
				drawer:setTextColor(255, 255, 0, 255)
				local size = GetStringSize(g_STRING_FONT_GULIMCHE, 12, g_STRING_REVIVE_MSG)
				drawer:drawText(g_STRING_REVIVE_MSG, 530-size/2, 500, WIDETYPE_7)
		
				-- �ٽ��Ͼ���� â
				drawer:drawTexture("UIData/GameNewImage.tga", 380, 520, 310, 23, 283, 0, WIDETYPE_7)
				
				-- ���� ������Ȱ ���� ������� ���
				if bFastRevive == 1 then
					
					if realRevival % 10 > 5 then
						drawer:drawTexture("UIData/GameNewImage.tga", 436, 527, realRevival, 9, 339, 32, WIDETYPE_7)
					end
					
					if realRevival % 30 > 15 then
						drawer:drawTextureWithScale_Angle_Offset("UIData/GameSlotItem.tga", 530, 580, 47, 49, 60, 139, 270, 270, 255, 0, 8, 100, 0, WIDETYPE_7)
						drawer:drawTextureWithScale_Angle_Offset("UIData/mainBG_button002.tga", 530, 580, 32, 32, 288, 788, 300, 300, 255, 0, 8, 100, 0, WIDETYPE_7)
					end
				end
				
				-- ��ú�Ȱ �������� ������� ǥ���� �ش�
				if rightRevive > 0 then
					g_rightReviveTime = g_rightReviveTime + deltatime
					g_rightReviveTime = g_rightReviveTime % 200
					if g_rightReviveTime < 100 then
						drawer:drawTexture("UIData/GameNewImage2.tga", 260, 450, 143, 73, 881, 237, WIDETYPE_7)
					else
						drawer:drawTexture("UIData/GameNewImage2.tga", 260, 450, 143, 73, 881, 310, WIDETYPE_7)
					end
				end
				
			end
			
		end
	else
		g_rightReviveTime = 0
	end
end




----------------------------------------------------

-- ���� ���� ������ �׸���(���� ȭ�鿡 �ִ� ���� ������, �� ���)

----------------------------------------------------
local g_eventTime1 = 0
local g_eventTime2 = 0
local lastGaugeEfeectTime	= 0
local faceEffectTime		= 0
tTransformBigTexX			= { ["err"]=0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 541, 541, 541, 541, 541, 541, 541, 541, 541, 541,	541, 541, 0, 0, 0
										, 0, 0, 0, 0, 0, 0, 0, 541, 541, 0, 0, 0, 541, 0, 0, 0, 0, 0}
										
tTransformBigTexY			= { ["err"]=0, 0, 98, 196, 294, 392, 490, 588, 686, 784, 882, 0, 98, 196, 294, 392, 490, 588, 686, 686, 686,	784, 882, 98, 0, 196 
										, 0, 98, 196, 294, 392, 490, 588, 98, 0, 882, 686, 784, 294, 588, 490, 294, 392, 686}
										
tTransformBigFileName		= { ["err"]=0, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage01.tga", "characterNewImage01.tga", "characterNewImage01.tga"
											, "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga"
											, "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga"
											, "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage01.tga", "characterNewImage01.tga"
											, "characterNewImage01.tga", "characterNewImage01.tga", "characterNewImage01.tga"}
											
tTransformSmallTexX			= { ["err"]=0, 339, 339, 339, 339, 339, 339, 339, 339, 339, 339, 
													 339, 339, 339, 339, 339, 339, 339, 339, 339, 339,	
													339, 339, 236, 236, 236 , 339, 339, 339, 339, 339, 
													339, 339, 339, 339, 339, 339, 339, 339, 236, 236, 
													236, 236, 236}
										
tTransformSmallTexY			= { ["err"]=0, 0, 49, 98, 147, 196, 245, 294, 343, 392, 441, 
													490, 539, 588, 637, 686, 735, 784, 833, 833, 833,	
													882, 931, 49, 0, 98, 0, 49, 98, 147, 196, 
													245, 294, 539, 490, 441, 343, 392, 637, 294, 245, 
													196, 196, 343}
										
tTransformSmallFileName		= { ["err"]=0, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga", "characterNewImage.tga"
											, "characterNewImage.tga", "characterNewImage.tga", "characterNewImage01.tga", "characterNewImage01.tga", "characterNewImage01.tga"
											, "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga"
											, "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga"
											, "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage02.tga", "characterNewImage01.tga", "characterNewImage01.tga"
											, "characterNewImage01.tga", "characterNewImage01.tga", "characterNewImage01.tga"}
											
function Common_RenderME(slot, mybone, hp, sp, maxhp, maxsp, deltatime, RESPAWN_TIME, revivalTime, level, characterName, 
						isGameOver, lifeCount, countdownPassed, transform, isPenalty, penaltyValue, bArcadeEvent, exceptE, visibleHPSP, bTournamentArcade)							
	

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	
	if maxhp <= 0 then
		return
	end
	if maxsp <= 0 then
		maxsp = 3000
	end
	
	
	----------------------------------

	-- ���� ������(HP, SP)

	----------------------------------
	local realwidth = 167
	--local realwidth = 144
	
	-- ��â
	
	drawer:drawTexture("UIData/mainBG_Button004.tga", 4, 4, 244, 86, 0, 426)
	
	-- �ʻ�� â
	drawer:drawTexture("UIData/mainBG_Button004.tga", 73, 37, 62, 18, 426, 225)
	

	if hp >= maxhp then
		hp = maxhp
	end
	
	if lasthp[slot] >= maxhp then
		lasthp[slot] = maxhp
	end

	--��ȭ�ϰ� �ִ� ������
	computedOldHPrealwidth = lasthp[slot] * realwidth / maxhp
	computedOldSPrealwidth = lastsp[slot] * realwidth / maxsp
	
	drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 9, computedOldHPrealwidth, 9, 244, 449)
	drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 24, computedOldSPrealwidth, 9, 244, 494)
	
	--���� ������
	computedHPrealwidth = hp * realwidth / maxhp
	computedSPrealwidth = sp * realwidth / maxsp
	
	
	-- hp 600������ �� �����Ÿ���
	local warningHP = maxhp/10
	if hp > warningHP then
		drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 9, computedHPrealwidth, 9, 244, 431)
	else
	
		lastGaugeEfeectTime = lastGaugeEfeectTime + deltatime
		lastGaugeEfeectTime = lastGaugeEfeectTime % 100
					
		if lastGaugeEfeectTime < 50 then
			drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 9, computedHPrealwidth, 9, 244, 431)
		else
			drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 9, computedHPrealwidth, 9, 244, 503)
		end
	end
	
	
	-- ���Ƽ ������
	if isPenalty == 1 then
		local penaltyWidth = realwidth*(100-penaltyValue)/100
		local penaltyTexX = 877 + penaltyWidth
		local penaltyposX = 75 + penaltyWidth
		local penaltySize = realwidth*penaltyValue/100
		drawer:drawTexture("UIData/mainBG_Button004.tga", penaltyposX, 9, penaltySize+1, 9, 244, 431)
	end
	
		
	-- sp �׸���
	local LIMIT_Q = 1000
	local LIMIT_W = 2000
	local LIMIT_E = 3000
	
	if( 0 <= sp and sp < LIMIT_Q ) then	
		drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 24, computedSPrealwidth, 9, 244, 494)		-- ȸ��
		
	-- Q
	elseif( LIMIT_Q <= sp and sp < LIMIT_W ) then	
		drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 24, computedSPrealwidth, 9, 244, 467)		-- ���
		drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 40, 21, 13, 426, 243)						-- Q�� �ҵ���
		
	-- Q, W
	elseif( LIMIT_W <= sp and sp < LIMIT_E ) then	
		drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 24, computedSPrealwidth, 9, 244, 476)		-- �ʷ�
		drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 40, 21, 13, 426, 243)						-- Q�� �ҵ���
		drawer:drawTexture("UIData/mainBG_Button004.tga", 93, 40, 21, 13, 447, 243)						-- W�� �ҵ���
		
	-- Q, W, E
	elseif( LIMIT_E <= sp ) then
		if exceptE == 0 then
			drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 24, computedSPrealwidth, 9, 244, 485)	-- �Ķ�
		else
			drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 24, computedSPrealwidth, 9, 244, 476)	-- �ʷ�
		end		
		drawer:drawTexture("UIData/mainBG_Button004.tga", 76, 40, 21, 13, 426, 243)			-- Q�� �ҵ���
		drawer:drawTexture("UIData/mainBG_Button004.tga", 93, 40, 21, 13, 447, 243)			-- W�� �ҵ���
		if exceptE == 0 then
			drawer:drawTexture("UIData/mainBG_Button004.tga", 111, 40,  21, 13, 468, 243)	-- E�� �ҵ���
		end
	end
	----------------------------------------
	--	�ɸ��� ��
	----------------------------------------
	if transform == 501 then
	 transform = 26
	elseif transform == 502 then
	 transform = 27
	elseif transform == 503 then
	 transform = 28
	elseif transform == 504 then
	 transform = 29
	elseif transform == 505 then
	 transform = 30
	elseif transform == 506 then
	 transform = 31
	elseif transform == 507 then
	 transform = 32
	end


	-- ���� ������ ��
	if transform <= 0 then
	
		-- ��(�׾��� ��)
		if hp <= 0 then
			
			-- ī��Ʈ �ٿ��� ������ �϶���(�����̵忡���� ������)
			if countdownPassed == 0 then
				if revivalTime > 0 then
					faceEffectTime = faceEffectTime + deltatime
					faceEffectTime = faceEffectTime % 200
						
					if faceEffectTime < 100 then
						--drawer:drawTexture("UIData/GameImage.tga", 12, 7, 78, 96, 88, mybone*98)
						drawer:drawTextureWithScale_Angle_Offset("UIData/GameImage.tga",  8, 8, 78, 96, 88, mybone*98, 200, 200, 255, 0, 0, 0, 0)
					end
				else
					--drawer:drawTexture("UIData/GameImage.tga", 12, 7, 78, 96, 176, mybone*98)
					drawer:drawTextureWithScale_Angle_Offset("UIData/GameImage.tga",  8, 8, 78, 96, 176, mybone*98, 200, 200, 255, 0, 0, 0, 0)
				end
				
				
			-- ������ �⺻ countdownPassed == 1
			elseif countdownPassed == 1 then
			
				-- ��� ��
				drawer:drawTextureWithScale_Angle_Offset("UIData/GameImage.tga",  8, 8, 78, 96, 176, mybone*98, 200, 200, 255, 0, 0, 0, 0)
			end
			
		-- ��(���)
		else
			drawer:drawTextureWithScale_Angle_Offset("UIData/GameImage.tga",  8, 8, 78, 96, 0, mybone*98, 200, 200, 255, 0, 0, 0, 0)
			--drawer:drawTexture("UIData/GameImage.tga", 12, 7, 78, 96, 0, mybone*98)
		end
	else
		-- ��(�׾��� ��)
		if hp <= 0 then
			
			-- ī��Ʈ �ٿ��� ������ �϶���(�����̵忡���� ������)
			if countdownPassed == 0 then
				if revivalTime > 0 then
					faceEffectTime = faceEffectTime + deltatime
					faceEffectTime = faceEffectTime % 200
						
					if faceEffectTime < 100 then
						--drawer:drawTexture("UIData/"..tTransformBigFileName[transform], 12, 7, 78, 96, tTransformBigTexX[transform]+88, tTransformBigTexY[transform])
						drawer:drawTextureWithScale_Angle_Offset("UIData/"..tTransformBigFileName[transform],  8, 8, 78, 96, tTransformBigTexX[transform]+88, tTransformBigTexY[transform], 200, 200, 255, 0, 0, 0, 0)
					end
				else
					--drawer:drawTexture("UIData/"..tTransformBigFileName[transform], 12, 7, 78, 96, tTransformBigTexX[transform]+176, tTransformBigTexY[transform])
					drawer:drawTextureWithScale_Angle_Offset("UIData/"..tTransformBigFileName[transform],  8, 8, 78, 96, tTransformBigTexX[transform]+176, tTransformBigTexY[transform], 200, 200, 255, 0, 0, 0, 0)
				end
				
				
			-- ������ �⺻ countdownPassed == 1
			elseif countdownPassed == 1 then
			
				-- ��� ��
				--drawer:drawTexture("UIData/"..tTransformBigFileName[transform], 12, 7, 78, 96, tTransformBigTexX[transform]+176, tTransformBigTexY[transform])
				drawer:drawTextureWithScale_Angle_Offset("UIData/"..tTransformBigFileName[transform],  8, 8, 78, 96, tTransformBigTexX[transform]+176, tTransformBigTexY[transform], 200, 200, 255, 0, 0, 0, 0)
			end
			
		-- ��(���)
		else
			--drawer:drawTexture("UIData/"..tTransformBigFileName[transform], 12, 7, 78, 96, tTransformBigTexX[transform], tTransformBigTexY[transform])
			drawer:drawTextureWithScale_Angle_Offset("UIData/"..tTransformBigFileName[transform],  8, 8, 78, 96, tTransformBigTexX[transform], tTransformBigTexY[transform], 200, 200, 255, 0, 0, 0, 0)
		end
	end
	
	-- �ɸ��� �̸�
	local FONT_SIZE = 12
	if IsKoreanLanguage() then
		FONT_SIZE = 11
	end
	
	drawer:setFont(g_STRING_FONT_GULIMCHE, FONT_SIZE)
	drawer:setTextColor(255,205,86,255)	
	local summaryName = SummaryString(g_STRING_FONT_GULIMCHE, FONT_SIZE, characterName, 70)
	local nameSize = GetStringSize(g_STRING_FONT_GULIMCHE, FONT_SIZE, summaryName)
	--drawer:drawText(summaryName, 41-(nameSize/2), 70)
	
	if bTournamentArcade == 0 then
		drawer:drawTexture("UIData/GameSlotItem.tga", 28, 8, 48, 16, 5, 233);
		drawer:drawText("Lv."..level, 35, 11)
	
		-- HPǥ��
		if visibleHPSP == 1 then
			drawer:setTextColor(255,225,225,255)
			local hpSize = GetStringSize(g_STRING_FONT_GULIMCHE, FONT_SIZE, tostring(hp))
			drawer:drawText(hp, 186-hpSize, 9)
			drawer:drawText(" / ", 186, 9)
			drawer:drawText(maxhp, 200, 9)
			
			-- SPǥ��
			drawer:setTextColor(255,255,255,255)
			local spSize = GetStringSize(g_STRING_FONT_GULIMCHE, FONT_SIZE, tostring(sp))
			drawer:drawText(sp, 186-spSize, 24)
			drawer:drawText(" / ", 186, 24)
			drawer:drawText(maxsp, 200, 24)
		end
	end
	
	-- E�ʻ�� ����
	if exceptE == 1 then
		drawer:drawTexture("UIData/LobbyImage_new.tga", 233, 36, 26, 26, 998, 370)
	end
	
	-- �̺�Ʈ
	--bArcadeEvent = 1
	if bArcadeEvent == 1 then		
		g_eventTime1 = g_eventTime1 + deltatime
		g_eventTime1 = g_eventTime1 % 60
		
		if g_eventTime1 < 30 then
			--drawer:drawTextureA("UIData/GameNewImage.tga", 121, 26, computedSPrealwidth, 12, 309, 727, 200)
			drawer:drawTextureA("UIData/mainBG_Button004.tga", 76, 24, computedSPrealwidth, 9, 244, 503,200)
		end
		
		g_eventTime2 = g_eventTime2 + deltatime
		g_eventTime2 = g_eventTime2 % 400
		
		if g_eventTime2 < 200 then
			drawer:drawTexture("UIData/GameNewImage.tga", 54, 9, 49, 41, 452, 952)
		end
	end
end
	
	
	
	

----------------------------------------------------------

-- �޺�, ������

----------------------------------------------------------
local textTerm = 45

local damageNum_10000	= 10
local damageNum_1000	= damageNum_10000 + (textTerm*1)
local damageNum_100		= damageNum_10000 + (textTerm*2)
local damageNum_10		= damageNum_10000 + (textTerm*3)
local damageNum_1		= damageNum_10000 + (textTerm*4)
local damageText		= damageNum_10000 + (textTerm*5)

local comboLastPos  = 138
local damageLastPos = 221
local tComboTime  = { ["err"]=0, -109, 0, -199 } -- �޺� ����ũ�� 109, ����ũ�� 45 * 2
local tDamageTime = { ["err"]=0, -127, 0, -307 }	-- ������ ����ũ�� 127, ����ũ�� 45 * 4

tCDText		  = { ["err"]=0, [0]=0, 42, 72, 114, 156, 196, 236, 278, 313, 355 }
tCDSize		  = { ["err"]=0, [0]=42, 30, 42, 42, 40, 40, 42, 35, 42, 43 }
tCombo2ndPos  = { ["err"]=0, [0]=100, 110, 100, 100, 100, 100, 100, 110, 100, 100 }
tDamage4thPos = { ["err"]=0, [0]=183, 193, 183, 183, 183, 183, 183, 193, 183, 183 }


-- ������ ���ڸ� �����ش�(������ ȣ��Ǿ� �Լ��� ����)
function ShowDamage(accumDamage, onePosX)
	local myr = accumDamage/10000
	local tho = (accumDamage - (myr*10000))/1000
	local hun = (accumDamage - (myr*10000 + tho*1000))/100
	local ten = (accumDamage - (myr*10000 + tho*1000 + hun*100))/10
	local one = accumDamage%10
	
	if accumDamage <= 0 then
		return
	end
	
	-- 1�ڸ�
	local currDmgPos = onePosX
	drawer:drawTexture("UIData/GameNewImage.tga", currDmgPos, 300, tCDSize[one], 64, tCDText[one], 359)
	
	
	-- 10�ڸ�
	if accumDamage >= 10 then
		currDmgPos = currDmgPos - tCDSize[ten]
		drawer:drawTexture("UIData/GameNewImage.tga", currDmgPos, 300, tCDSize[ten], 64, tCDText[ten], 359)
	end
	
	-- 100�ڸ�
	if accumDamage >= 100 then
	currDmgPos = currDmgPos - tCDSize[hun]
	drawer:drawTexture("UIData/GameNewImage.tga", currDmgPos, 300, tCDSize[hun], 64, tCDText[hun], 359)
	end
	
	-- 1000�ڸ�
	if accumDamage >= 1000 then
	currDmgPos = currDmgPos - tCDSize[tho]
	drawer:drawTexture("UIData/GameNewImage.tga", currDmgPos, 300, tCDSize[tho], 64, tCDText[tho], 359)
	end
	
	-- 10000�ڸ�
	if accumDamage >= 10000 then
	currDmgPos = currDmgPos - tCDSize[myr]
	drawer:drawTexture("UIData/GameNewImage.tga", currDmgPos, 300, tCDSize[myr], 64, tCDText[myr], 359)
	end
end


-- �޺� ���ڸ� �����ش�(������ ȣ��Ǿ� �Լ��� ����)
function ShowCombo(currentCombo, onePosX)
	local hun = currentCombo/100
	local ten = (currentCombo - (hun*100))/10
	local one = currentCombo%10
	
	-- 1�ڸ�
	local currComboPos = onePosX
	drawer:drawTexture("UIData/GameNewImage.tga", currComboPos, 230, tCDSize[one], 64, tCDText[one], 427)
	
	
	-- 10�ڸ�
	if currentCombo >= 10 then
	currComboPos = currComboPos - tCDSize[ten]
	drawer:drawTexture("UIData/GameNewImage.tga", currComboPos, 230, tCDSize[ten], 64, tCDText[ten], 427)
	end
	
	-- 100�ڸ�
	if currentCombo >= 100 then
	currComboPos = currComboPos - tCDSize[hun]
	drawer:drawTexture("UIData/GameNewImage.tga", currComboPos, 230, tCDSize[hun], 64, tCDText[hun], 427)
	end
end



-- ������ �޺��� �����ش�.
local LIMIT_TECH_IMAGE_TIME = 2000
local LIMIT_RIGHT_IMAGE = -250
local g_technicPosX = 0
local teamAttackStart = false
local doubleAttackStart = false
local oldTeamAttack = 0
local oldDoubleAttack = 0
local g_currentAttackCount = 0
local techTime = 0
function Common_InitComboDamage(teamAttackCount, doubleAttackCount)
	oldTeamAttack   = teamAttackCount
	oldDoubleAttack = doubleAttackCount
end


local MAX_DAMAGE_COUNT = 10
local g_currentAttackDamageCount = 0
local g_accumulateDamageAlpha = 0
local g_accumulateDamageTime = 0
local g_comboTime = 0
local g_comboAlpha = 0
local g_attackDamageTime = {["err"]=0}
local g_attackDamageTime2 = {["err"]=0}
local g_attackDamage = {["err"]=0}
local g_attackDamageAlpha = {["err"]=0}
local g_attackDamagePosX = {["err"]=0}
local g_attackDamagePosY = {["err"]=0}
for i=0, MAX_DAMAGE_COUNT-1 do
	g_attackDamageTime[i] = 0
	g_attackDamageTime2[i] = 0
	g_attackDamage[i] = 0
	g_attackDamageAlpha[i] = 0
	g_attackDamagePosX[i] = 0
	g_attackDamagePosY[i] = 0
end

function Common_StartAttackDamage(damage, posX, posY)
	g_accumulateDamageAlpha = 255
	g_accumulateDamageTime = 0
	
	g_attackDamageTime[g_currentAttackDamageCount] = 0
	g_attackDamageTime2[g_currentAttackDamageCount] = 0
	g_attackDamage[g_currentAttackDamageCount] = damage
	g_attackDamageAlpha[g_currentAttackDamageCount] = 255
	g_attackDamagePosX[g_currentAttackDamageCount] = posX
	g_attackDamagePosY[g_currentAttackDamageCount] = posY
	
	g_comboTime = 0
	g_comboAlpha = 255
	
	g_currentAttackDamageCount = g_currentAttackDamageCount + 1
	g_currentAttackDamageCount = g_currentAttackDamageCount % MAX_DAMAGE_COUNT
end

local g_currentDefenceDamageCount = 0
local g_defenceDamageTime = {["err"]=0}
local g_defenceDamageTime2 = {["err"]=0}
local g_defenceDamage = {["err"]=0}
local g_defenceDamageAlpha = {["err"]=0}
local g_defenceDamagePosX = {["err"]=0}
local g_defenceDamagePosY = {["err"]=0}
for i=0, MAX_DAMAGE_COUNT-1 do
	g_defenceDamageTime[i] = 0
	g_defenceDamageTime2[i] = 0
	g_defenceDamage[i] = 0
	g_defenceDamageAlpha[i] = 0
	g_defenceDamagePosX[i] = 0
	g_defenceDamagePosY[i] = 0
end
function Common_StartDefenceDamage(damage, posX, posY)
	g_defenceDamageTime[g_currentDefenceDamageCount] = 0
	g_defenceDamageTime2[g_currentDefenceDamageCount] = 0
	g_defenceDamage[g_currentDefenceDamageCount] = damage
	g_defenceDamageAlpha[g_currentDefenceDamageCount] = 255
	g_defenceDamagePosX[g_currentDefenceDamageCount] = posX
	g_defenceDamagePosY[g_currentDefenceDamageCount] = posY
	
	g_currentDefenceDamageCount = g_currentDefenceDamageCount + 1
	g_currentDefenceDamageCount = g_currentDefenceDamageCount % MAX_DAMAGE_COUNT
	
	DebugStr("g_currentDefenceDamageCount : " .. g_currentDefenceDamageCount)
end

-------------------------------------------------------------------------------------------
--Get Scramble Info
-------------------------------------------------------------------------------------------
local MAX_GET_SCRAMBLE_ZEN_COUNT = 10
local g_PrevGetScrambleZenCount = 0
local g_currentGetScrambleZenCount = 0
local g_GetScrambleZenTime = {["err"]=0}
local g_GetScrambleZenTime2 = {["err"]=0}
local g_GetScrambleZen = {["err"]=0}
local g_GetScrambleZenAlpha = {["err"]=0}
local g_GetScrambleZenPosX = {["err"]=0}
local g_GetScrambleZenPosY = {["err"]=0}
for i=0, MAX_GET_SCRAMBLE_ZEN_COUNT-1 do
	g_GetScrambleZenTime[i] = 0
	g_GetScrambleZenTime2[i] = 0
	g_GetScrambleZen[i] = 0
	g_GetScrambleZenAlpha[i] = 0
	g_GetScrambleZenPosX[i] = 0
	g_GetScrambleZenPosY[i] = 0
end

function Common_SetGetScrambleZenInfo(Zen, posX, posY)
	g_GetScrambleZenTime[g_currentGetScrambleZenCount] = 0
	g_GetScrambleZenTime2[g_currentGetScrambleZenCount] = 0
	g_GetScrambleZen[g_currentGetScrambleZenCount] = Zen
	g_GetScrambleZenAlpha[g_currentGetScrambleZenCount] = 255
	g_GetScrambleZenPosX[g_currentGetScrambleZenCount] = posX
	g_GetScrambleZenPosY[g_currentGetScrambleZenCount] = posY
	
	if g_PrevGetScrambleZenCount ~= g_currentGetScrambleZenCount then
		local CurrPosY = g_GetScrambleZenPosY[g_currentGetScrambleZenCount];
		local PrevPosY = g_GetScrambleZenPosY[g_PrevGetScrambleZenCount];
		if PrevPosY - CurrPosY < 20 then
			g_GetScrambleZenPosY[g_currentGetScrambleZenCount] = PrevPosY + 20;
		end
		g_PrevGetScrambleZenCount = g_currentGetScrambleZenCount;
	end

	g_currentGetScrambleZenCount = g_currentGetScrambleZenCount + 1
	g_currentGetScrambleZenCount = g_currentGetScrambleZenCount % MAX_GET_SCRAMBLE_ZEN_COUNT
end
-------------------------------------------------------------------------------------------
-------------------------------------------------------------------------------------------
--Lose Scramble Info
-------------------------------------------------------------------------------------------
local MAX_LOSE_SCRAMBLE_ZEN_COUNT = 10
local g_currentLoseScrambleZenCount = 0
local g_LoseScrambleZenTime = {["err"]=0}
local g_LoseScrambleZenTime2 = {["err"]=0}
local g_LoseScrambleZen = {["err"]=0}
local g_LoseScrambleZenAlpha = {["err"]=0}
local g_LoseScrambleZenPosX = {["err"]=0}
local g_LoseScrambleZenPosY = {["err"]=0}
for i=0, MAX_LOSE_SCRAMBLE_ZEN_COUNT-1 do
	g_LoseScrambleZenTime[i] = 0
	g_LoseScrambleZenTime2[i] = 0
	g_LoseScrambleZen[i] = 0
	g_LoseScrambleZenAlpha[i] = 0
	g_LoseScrambleZenPosX[i] = 0
	g_LoseScrambleZenPosY[i] = 0
end

function Common_SetLoseScrambleZenInfo(Zen, posX, posY)
	g_LoseScrambleZenTime[g_currentLoseScrambleZenCount] = 0
	g_LoseScrambleZenTime2[g_currentLoseScrambleZenCount] = 0
	g_LoseScrambleZen[g_currentLoseScrambleZenCount] = Zen
	g_LoseScrambleZenAlpha[g_currentLoseScrambleZenCount] = 255
	g_LoseScrambleZenPosX[g_currentLoseScrambleZenCount] = posX
	g_LoseScrambleZenPosY[g_currentLoseScrambleZenCount] = posY
	
	g_currentLoseScrambleZenCount = g_currentLoseScrambleZenCount + 1
	g_currentLoseScrambleZenCount = g_currentLoseScrambleZenCount % MAX_LOSE_SCRAMBLE_ZEN_COUNT
end
-------------------------------------------------------------------------------------------
--DebugStr("----------------Get Scramble Info2--------------------")

function Common_ScrambleComboAndDamage(deltaTime, isCombo, currentCombo, isAccumulate, accumDamage, 
					teamAttackCount, doubleAttackCount, isTeamAttack, isDoubleAttack, currentAttackCount)
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()

	----------------------
	-- ��Ż�� ȹ�� �� 
	----------------------
	for i=0, MAX_GET_SCRAMBLE_ZEN_COUNT-1 do
		g_GetScrambleZenTime[i] = g_GetScrambleZenTime[i] + deltaTime
		local scale = Effect_Linear_EaseNone(g_GetScrambleZenTime[i], 0, 300 - g_GetScrambleZenTime[i], 80)
		if scale < 0 then
			scale = 0
		end
		
		g_GetScrambleZenAlpha[i] = g_GetScrambleZenAlpha[i] - (deltaTime/10)
		if g_GetScrambleZenAlpha[i] < 0 then
			g_GetScrambleZenAlpha[i] = 0
		end

		g_GetScrambleZenTime2[i] = g_GetScrambleZenTime2[i] - (deltaTime/9)
		
		--Zen Image
		drawer:drawTextureWithScale_Angle_Offset("UIData/fightClub_010.tga", g_GetScrambleZenPosX[i] - 72, g_GetScrambleZenPosY[i]+g_GetScrambleZenTime2[i] +2, 17, 17, 1007, 89, scale+255, scale+255, g_GetScrambleZenAlpha[i], 0, 8, 0, 0, WIDETYPE_0)
		--+ , - �̹���
		drawer:drawTextureWithScale_Angle_Offset("UIData/GameSlotItem.tga", g_GetScrambleZenPosX[i] - 55, g_GetScrambleZenPosY[i]+g_GetScrambleZenTime2[i], 16, 16, 832, 864, scale+255, scale+255, g_GetScrambleZenAlpha[i], 0, 8, 0, 0, WIDETYPE_0)
		DrawEachNumberAS("UIData/GameSlotItem.tga", g_GetScrambleZen[i], 8, g_GetScrambleZenPosX[i], g_GetScrambleZenPosY[i]+g_GetScrambleZenTime2[i], 864, 864, 16, 16, 16, g_GetScrambleZenAlpha[i], scale+255, scale+255, WIDETYPE_0)

	end
	--DebugStr("----------------Get Scramble Info3--------------------")
	----------------------
	-- ��Ż�� ���� �� 
	----------------------
	for i=0, MAX_LOSE_SCRAMBLE_ZEN_COUNT-1 do
		g_LoseScrambleZenTime[i] = g_LoseScrambleZenTime[i] + deltaTime
		local scale = Effect_Linear_EaseNone(g_LoseScrambleZenTime[i], 0, 300-g_LoseScrambleZenTime[i], 80)
		if scale < 0 then
			scale = 0
		end
		
		g_LoseScrambleZenAlpha[i] = g_LoseScrambleZenAlpha[i] - (deltaTime/10)
		if g_LoseScrambleZenAlpha[i] < 0 then
			g_LoseScrambleZenAlpha[i] = 0
		end
		g_LoseScrambleZenTime2[i] = g_LoseScrambleZenTime2[i] - (deltaTime/9)

		--Zen Image
		drawer:drawTextureWithScale_Angle_Offset("UIData/fightClub_010.tga", g_LoseScrambleZenPosX[i] - 72, g_LoseScrambleZenPosY[i]+g_LoseScrambleZenTime2[i] +2, 17, 17, 1007, 89, scale+255, scale+255, g_LoseScrambleZenAlpha[i], 0, 8, 0, 0, WIDETYPE_0)
		--+ , - �̹���
		drawer:drawTextureWithScale_Angle_Offset("UIData/GameSlotItem.tga", g_LoseScrambleZenPosX[i]- 55, g_LoseScrambleZenPosY[i]+g_LoseScrambleZenTime2[i], 16, 16, 848, 880, scale+255, scale+255, g_LoseScrambleZenAlpha[i], 0, 8, 0, 0, WIDETYPE_0)
		DrawEachNumberAS("UIData/GameSlotItem.tga", g_LoseScrambleZen[i], 8, g_LoseScrambleZenPosX[i], g_LoseScrambleZenPosY[i]+g_LoseScrambleZenTime2[i], 864, 880, 16, 16, 16, g_LoseScrambleZenAlpha[i], scale+255, scale+255, WIDETYPE_0)
	end
	--DebugStr("----------------Get Scramble Info4--------------------")
end
function Common_ComboAndDamage(deltaTime, isCombo, currentCombo, isAccumulate, accumDamage, 
					teamAttackCount, doubleAttackCount, isTeamAttack, isDoubleAttack, currentAttackCount)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	----------------------
	-- Ÿ�� ������
	----------------------
	for i=0, MAX_DAMAGE_COUNT-1 do
		g_attackDamageTime[i] = g_attackDamageTime[i] + deltaTime
		local scale = Effect_Linear_EaseNone(g_attackDamageTime[i], 0, 300-g_attackDamageTime[i], 80)
		if scale < 0 then
			scale = 0
		end
		
		g_attackDamageAlpha[i] = g_attackDamageAlpha[i] - (deltaTime/5)
		if g_attackDamageAlpha[i] < 0 then
			g_attackDamageAlpha[i] = 0
		end
		g_attackDamageTime2[i] = g_attackDamageTime2[i] - (deltaTime/9)
		DrawEachNumberAS("UIData/GameSlotItem.tga", g_attackDamage[i], 8, g_attackDamagePosX[i], g_attackDamagePosY[i]+g_attackDamageTime2[i], 704, 992, 32, 32, 32, g_attackDamageAlpha[i], scale+255, scale+255, WIDETYPE_0)
	end
	
	----------------------
	-- ���� ������
	----------------------
	if accumDamage > 0 then
		g_accumulateDamageTime = g_accumulateDamageTime + deltaTime
		local scale3 = Effect_Linear_EaseNone(g_accumulateDamageTime, 0, 300-g_accumulateDamageTime, 80)
		if scale3 < 0 then
			scale3 = 0
		end
		g_accumulateDamageAlpha = g_accumulateDamageAlpha - (deltaTime/5)
		if g_accumulateDamageAlpha < 0 then
			g_accumulateDamageAlpha = 0
		end
		DrawEachNumberAS("UIData/GameSlotItem.tga", accumDamage, 2, 980, 710, 0, 900, 41, 62, 41, g_accumulateDamageAlpha, (scale3/2)+255, (scale3/2)+255, WIDETYPE_3)
	end
	
	----------------------
	-- �´� ������
	----------------------
	for i=0, MAX_DAMAGE_COUNT-1 do
		g_defenceDamageTime[i] = g_defenceDamageTime[i] + deltaTime
		local scale2 = Effect_Linear_EaseNone(g_defenceDamageTime[i], 0, 300-g_defenceDamageTime[i], 80)
		if scale2 < 0 then
			scale2 = 0
		end
		
		g_defenceDamageAlpha[i] = g_defenceDamageAlpha[i] - (deltaTime/5)
		if g_defenceDamageAlpha[i] < 0 then
			g_defenceDamageAlpha[i] = 0
		end	
		g_defenceDamageTime2[i] = g_defenceDamageTime2[i] - (deltaTime/9)
		local _left, _right = DrawEachNumberAS("UIData/GameSlotItem.tga", g_defenceDamage[i], 8, g_defenceDamagePosX[i], g_defenceDamagePosY[i]+g_defenceDamageTime2[i], 704, 960, 32, 32, 32, g_defenceDamageAlpha[i], scale2+255, scale2+255, WIDETYPE_0)
		drawer:drawTextureWithScale_Angle_Offset("UIData/GameSlotItem.tga", _left-34, g_defenceDamagePosY[i]+g_defenceDamageTime2[i], 32, 32, 672, 960, 
										scale2+255, scale2+255, g_defenceDamageAlpha[i], 0, 8, 100, 0, WIDETYPE_0)
	end
	
	----------------------
	-- �޺�
	----------------------
	if isCombo == 1 then
		g_comboTime = g_comboTime + deltaTime
		local scale1 = Effect_Linear_EaseNone(g_comboTime, 0, 300-g_comboTime, 80)
		if scale1 < 0 then
			scale1 = 0
		end

		g_comboAlpha = g_comboAlpha - (deltaTime/5)
		if g_comboAlpha < 0 then
			g_comboAlpha = 0
		end
		drawer:drawTextureWithScale_Angle_Offset("UIData/GameSlotItem.tga", 950, 645, 107, 38, 410, 983, 255, 255, g_comboAlpha, 0, 8, 100, 0, WIDETYPE_3)
		DrawEachNumberAS("UIData/GameSlotItem.tga", currentCombo, 2, 860, 630, 0, 962, 41, 62, 41, g_comboAlpha, (scale1/2)+255, (scale1/2)+255, WIDETYPE_3)
	end
	
-------------------------------------------
-- ��, ��������
-------------------------------------------
	if oldTeamAttack ~= teamAttackCount then
		oldTeamAttack = teamAttackCount
		teamAttackStart = true
		g_technicPosX = 0
		techTime = 0
		PlaySound('sound/System/System_TeamAttack.wav')
	end
	
	if oldDoubleAttack ~= doubleAttackCount then
		oldDoubleAttack = doubleAttackCount
		doubleAttackStart = true
		g_technicPosX = 0
		techTime = 0
		PlaySound('sound/System/System_DoubleAttack.wav')
	end
	
	--[[
	-----------------------
	-- ��ȿ�� �׸��� ��, �������� �̹��� x��ġ
	if teamAttackStart or doubleAttackStart then
		techTime = techTime + deltaTime*2
		if 0 <= techTime and techTime <= LIMIT_TECH_IMAGE_TIME then
			g_technicPosX =	Effect_Elastic_EaseOut(techTime, LIMIT_RIGHT_IMAGE, 530, LIMIT_TECH_IMAGE_TIME, 0, 0)
		elseif techTime >= LIMIT_TECH_IMAGE_TIME + 2000 then
			g_technicPosX = g_technicPosX - deltaTime
			if g_technicPosX <= LIMIT_RIGHT_IMAGE then
				g_technicPosX = LIMIT_RIGHT_IMAGE
				teamAttackStart = false
				doubleAttackStart = false
				techTime = 0
			end
		end
	end
		
	-----------------------
	-- ��ȿ�� �׸��� ��, �������� �̹���
	if teamAttackStart then
		drawer:drawTexture("UIData/GameNewImage.tga", g_technicPosX+LIMIT_RIGHT_IMAGE,		160, 247, 117, 720, 834)
		drawer:drawTexture("UIData/GameNewImage.tga", g_technicPosX+130+LIMIT_RIGHT_IMAGE,	230, 85, 25, 623, 910)
	end
	
	if doubleAttackStart then
		drawer:drawTexture("UIData/GameNewImage.tga", g_technicPosX+LIMIT_RIGHT_IMAGE,		160, 247, 117, 720, 834)
		drawer:drawTexture("UIData/GameNewImage.tga", g_technicPosX+130+LIMIT_RIGHT_IMAGE,	230, 85, 25, 623, 883)
	end
	

-------------------------------------
-- ������
-------------------------------------
	if isAccumulate == 1 then
	
		-- ������������ �ٸ��� �� �ƴٴ� ���̹Ƿ� ������ ���� ��ġ�� �ʱ�ȭ�Ѵ�.
		if g_currentAttackCount ~= currentAttackCount then
			g_currentAttackCount = currentAttackCount
			tDamageTime[2] = accumDamage
			tDamageTime[3] = -307
		end
		
			
		-----------------------
		-- Damage ����
		
		if tDamageTime[1] >= damageLastPos then
			tDamageTime[1] = damageLastPos
		else
			tDamageTime[1] = tDamageTime[1] + (deltaTime*5)
		end
		
		if accumDamage > 0 then
			drawer:drawTexture("UIData/GameNewImage.tga", tDamageTime[1], 324, 127, 40, 397, 383)
		end

		
		-----------------------
		-- Damage ����
		local numPos = 0
		if accumDamage < 10 then
			numPos = accumDamage
		else
			numPos = accumDamage%10
		end
		
		tDamageTime[3] = tDamageTime[3] + (deltaTime*3)		
		if tDamageTime[3] >= tDamage4thPos[numPos] then
			tDamageTime[3] = tDamage4thPos[numPos]						
			ShowDamage(accumDamage, tDamage4thPos[numPos])
		else		
			ShowDamage(accumDamage, tDamageTime[3])
		end
		
		
	-- ���� �������� ��� �ٽ� <-- �������� ���ư���
	else

		tDamageTime[1] = tDamageTime[1] - deltaTime
		tDamageTime[3] = tDamageTime[3] - deltaTime
		
		
		-----------------------
		-- Damage ����
		if tDamageTime[1] >= -127 then
			drawer:drawTexture("UIData/GameNewImage.tga", tDamageTime[1], 324, 127, 40, 397, 383)
		else
			tDamageTime[1] = -127
		end
		
		-----------------------
		-- Damage ����(�������� �̸� ����� ������������ ����ؾ� 0���� �����ʴ´�)
		if tDamageTime[3] >= -307 then		
			ShowDamage(tDamageTime[2],  tDamageTime[3])
		else		
			tDamageTime[3] = -307
			ShowDamage(tDamageTime[2],  tDamageTime[3])
		end
	end
	
	

-------------------------------------
-- �޺�
-------------------------------------
	if isCombo == 1 then
		
		-- �����޺��� �ٸ��� �� �ƴٴ� ���̹Ƿ� �޺����� ��ġ�� �ʱ�ȭ�Ѵ�.
		if tComboTime[2] ~= currentCombo then
			tComboTime[2] = currentCombo
			tComboTime[3] = -199
		end
		
		
		-----------------------
		-- Combo ���� x��ġ
		if tComboTime[1] >= comboLastPos then
			tComboTime[1] = comboLastPos
		else
			tComboTime[1] = tComboTime[1] + (deltaTime*4)
		end
		
		-- �޺� ���� �̹���
		drawer:drawTexture("UIData/GameNewImage.tga", tComboTime[1], 256, 109, 36, 397, 450)
		
		
		-----------------------
		-- Combo ����
		local numPos = 0
		if currentCombo < 10 then
			numPos = currentCombo
		else
			numPos = currentCombo%10
		end
		
		tComboTime[3] = tComboTime[3] + (deltaTime*3)
		if tComboTime[3] >= tCombo2ndPos[numPos] then
			tComboTime[3] = tCombo2ndPos[numPos]			
			ShowCombo(currentCombo, tCombo2ndPos[numPos])
		else
			ShowCombo(currentCombo, tComboTime[3])
		end
		
	else
		tComboTime[1] = tComboTime[1] - deltaTime
		tComboTime[3] = tComboTime[3] - deltaTime
				
		-----------------------
		-- Combo ����
		if tComboTime[1] >= -109 then
			drawer:drawTexture("UIData/GameNewImage.tga", tComboTime[1], 256, 109, 36, 397, 450)	-- �޺�����
		else
			tComboTime[1] = -109
		end

		
		-----------------------
		-- Combo ����
		if tComboTime[3] >= -199 then
			ShowCombo(tComboTime[2], tComboTime[3])
		else
			tComboTime[3] = -199
			ShowCombo(tComboTime[2], tComboTime[3])	
		end
	end
--]]
end







----------------------------------------------------------

-- WndQuest ������, �޺� �׸���

----------------------------------------------------------
function WndQuest_InitComboDamage(teamAttackCount, doubleAttackCount)
	Common_InitComboDamage(teamAttackCount, doubleAttackCount)
end

function WndQuest_ComboAndDamage(deltaTime, isCombo, currentCombo, isAccumulate, accumDamage, 
							teamAttackCount, doubleAttackCount, isTeamAttack, isDoubleAttack, currentAttackCount)
--	Common_ComboAndDamage(deltaTime, isCombo, currentCombo, isAccumulate, accumDamage, 
--			teamAttackCount, doubleAttackCount, isTeamAttack, isDoubleAttack, currentAttackCount)


	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()

	----------------------
	-- Ÿ�� ������
	----------------------
	for i=0, MAX_DAMAGE_COUNT-1 do
		g_attackDamageTime[i] = g_attackDamageTime[i] + deltaTime
		local scale = Effect_Linear_EaseNone(g_attackDamageTime[i], 0, 300-g_attackDamageTime[i], 80)
		if scale < 0 then
			scale = 0
		end
		
		g_attackDamageAlpha[i] = g_attackDamageAlpha[i] - (deltaTime/5)
		if g_attackDamageAlpha[i] < 0 then
			g_attackDamageAlpha[i] = 0
		end
		g_attackDamageTime2[i] = g_attackDamageTime2[i] - (deltaTime/9)
		DrawEachNumberAS("UIData/GameSlotItem.tga", g_attackDamage[i], 8, g_attackDamagePosX[i], g_attackDamagePosY[i]+g_attackDamageTime2[i], 704, 992, 32, 32, 32, g_attackDamageAlpha[i], scale+255, scale+255, WIDETYPE_0)
	end
	
	----------------------
	-- ���� ������
	----------------------
	if accumDamage > 0 then
		g_accumulateDamageTime = g_accumulateDamageTime + deltaTime
		local scale3 = Effect_Linear_EaseNone(g_accumulateDamageTime, 0, 300-g_accumulateDamageTime, 80)
		if scale3 < 0 then
			scale3 = 0
		end
		g_accumulateDamageAlpha = g_accumulateDamageAlpha - (deltaTime/5)
		if g_accumulateDamageAlpha < 0 then
			g_accumulateDamageAlpha = 0
		end
		DrawEachNumberAS("UIData/GameSlotItem.tga", accumDamage, 2, 980, 646, 0, 900, 41, 62, 41, g_accumulateDamageAlpha, (scale3/2)+255, (scale3/2)+255, WIDETYPE_3)
	end
	
	----------------------
	-- �´� ������
	----------------------
	for i=0, MAX_DAMAGE_COUNT-1 do
		g_defenceDamageTime[i] = g_defenceDamageTime[i] + deltaTime
		local scale2 = Effect_Linear_EaseNone(g_defenceDamageTime[i], 0, 300-g_defenceDamageTime[i], 80)
		if scale2 < 0 then
			scale2 = 0
		end
		
		g_defenceDamageAlpha[i] = g_defenceDamageAlpha[i] - (deltaTime/5)
		if g_defenceDamageAlpha[i] < 0 then
			g_defenceDamageAlpha[i] = 0
		end	
		g_defenceDamageTime2[i] = g_defenceDamageTime2[i] - (deltaTime/9)
		local _left, _right = DrawEachNumberAS("UIData/GameSlotItem.tga", g_defenceDamage[i], 8, g_defenceDamagePosX[i], g_defenceDamagePosY[i]+g_defenceDamageTime2[i], 704, 960, 32, 32, 32, g_defenceDamageAlpha[i], scale2+255, scale2+255, WIDETYPE_0)
		drawer:drawTextureWithScale_Angle_Offset("UIData/GameSlotItem.tga", _left-34, g_defenceDamagePosY[i]+g_defenceDamageTime2[i], 32, 32, 672, 960, 
										scale2+255, scale2+255, g_defenceDamageAlpha[i], 0, 8, 100, 0, WIDETYPE_0)
	end
	
	----------------------
	-- �޺�
	----------------------
	if isCombo == 1 then
		g_comboTime = g_comboTime + deltaTime
		local scale1 = Effect_Linear_EaseNone(g_comboTime, 0, 300-g_comboTime, 80)
		if scale1 < 0 then
			scale1 = 0
		end

		g_comboAlpha = g_comboAlpha - (deltaTime/5)
		if g_comboAlpha < 0 then
			g_comboAlpha = 0
		end
		drawer:drawTextureWithScale_Angle_Offset("UIData/GameSlotItem.tga", 950, 581, 107, 38, 410, 983, 255, 255, g_comboAlpha, 0, 8, 100, 0, WIDETYPE_3)
		DrawEachNumberAS("UIData/GameSlotItem.tga", currentCombo, 2, 860, 566, 0, 962, 41, 62, 41, g_comboAlpha, (scale1/2)+255, (scale1/2)+255, WIDETYPE_3)
	end
	
-------------------------------------------
-- ��, ��������
-------------------------------------------
	if oldTeamAttack ~= teamAttackCount then
		oldTeamAttack = teamAttackCount
		teamAttackStart = true
		g_technicPosX = 0
		techTime = 0
		PlaySound('sound/System/System_TeamAttack.wav')
	end
	
	if oldDoubleAttack ~= doubleAttackCount then
		oldDoubleAttack = doubleAttackCount
		doubleAttackStart = true
		g_technicPosX = 0
		techTime = 0
		PlaySound('sound/System/System_DoubleAttack.wav')
	end
	
end







-- �Ű�����(��Ʈ�̸�, ��Ʈũ��, �޼���)�� �Ѱ��ָ� ����� �����Ѵ�.
function GetStringSize(fontName, fontHeight, message)	
	local strSize = GetFontSize(fontName, fontHeight, message)	
	return strSize	
end

-- Modify by Jiyuu
-- From Jiyuu
-- �Ű�����(�����̸�, ����, ���Ĺ��, x, y, �ؽ���x, �ؽ���y, ������x, ������y, �ؽ��� ����)
function DrawEachNumberAdvancedWide(fileName, number, align, posX, posY, startX, startY, sizeX, sizeY, spacing, widetype, ...)
	local drawer
	if select('#', ...) == 0 then
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	else
		drawer = select(1, ...)
	end
	
	if number < 0 then
		number = number * -1
	end

	local number_string = tostring(number)
	local reverse_number = string.reverse(number_string)
	local numberOfDigit = string.len(number_string)
	
	-- ���� ����(1)
	if align == 1 then
		for i = 1, numberOfDigit do
			local digit = number_string:sub(i,i)
			local iterValue = i - 1
            local drawPosX = posX + ( sizeX * iterValue )
			drawer:drawTexture(fileName, drawPosX, posY, sizeX, sizeY, startX + ( digit * spacing ), startY, widetype)	
		end
	-- ������ ����(2)
	elseif align == 2 then
		for i = 1, numberOfDigit do
			local digit = reverse_number:sub(i,i)
			local iterValue = i - 1
			local num_pos = numberOfDigit - iterValue
			local drawPosX = posX - ( sizeX * iterValue )
			drawer:drawTexture(fileName, drawPosX, posY, sizeX, sizeY, startX + ( digit * spacing ), startY, widetype)	
		end
	-- ��� ����(8)
	elseif align == 8 then
		for i = 1, numberOfDigit do
			local digit = number_string:sub(i,i)
			local divideValue = floor(numberOfDigit / 2)
			local iterValue = i - 1
            local drawPosX = 0
            
            -- ¦���� ���
			if numberOfDigit % 2 == 0 then
				if iterValue <= divideValue then
                    drawPosX = posX -(sizeX/2) - ( sizeX * (divideValue - i ) )
				else
                    drawPosX = posX +(sizeX/2) + ( sizeX * (divideValue - i ) )
				end
			-- Ȧ���� ���	
			else
				if iterValue < divideValue then
                    drawPosX = posX - ( sizeX * (divideValue - iterValue ) )
				elseif iterValue == divideValue then
                    drawPosX = posX
				else
                    drawPosX = posX + ( sizeX * (divideValue - iterValue ) )
				end
			end
				
            drawer:drawTexture(fileName, drawPosX, posY, sizeX, sizeY, startX + ( digit * spacing ), startY, widetype)	
		end
	end
end

-- ���ڸ� �޾Ƽ� �ѷ��ش�(����� 1000000(�鸸)����������)
-- �Ű�����(�����̸�, ����, ���Ĺ��, x, y, �ؽ���x, �ؽ���y, ������x, ������y, �ؽ��� ����)
function DrawEachNumber(fileName, number, align, posX, posY, startX, startY, sizeX, sizeY, spacing , ...)
	
	local drawer
	if select('#', ...) == 0 then
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	else
		drawer = select(1, ...)
	end
	
	if number < 0 then
		number = number * -1
	end
	
	local mil = number/1000000
	local hth = (number - (mil*1000000))/100000
	local myr = (number - (mil*1000000 + hth*100000))/10000
	local tho = (number - (mil*1000000 + hth*100000 + myr*10000))/1000
	local hun = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000))/100
	local ten = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000 + hun*100))/10
	local one = number%10
	
	local _left, _right
	local _1st, _2nd, _3rd, _4th, _5th, _6th, _7th
	
	-- ���� ����(1)
	if align == 1 then
		_1st = posX
		_2nd = posX+sizeX
		_3rd = posX+sizeX+sizeX
		_4th = posX+sizeX+sizeX+sizeX
		_5th = posX+sizeX+sizeX+sizeX+sizeX
		_6th = posX+sizeX+sizeX+sizeX+sizeX+sizeX
		_7th = posX+sizeX+sizeX+sizeX+sizeX+sizeX+sizeX
		
	-- ������ ����(2)
	elseif align == 2 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX-sizeX
			_5th = posX-sizeX-sizeX
			_6th = posX-sizeX
			_7th = posX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX
			_5th = posX-sizeX
			_6th = posX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX
			_4th = posX-sizeX
			_5th = posX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
		
		elseif 10 <= number and number < 100 then
			_1st = posX-sizeX
			_2nd = posX
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	
	-- ��� ����(8)	
	elseif align == 8 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			_5th = posX+sizeX
			_6th = posX+sizeX+sizeX
			_7th = posX+sizeX+sizeX+sizeX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX - (sizeX/2)-sizeX-sizeX
			_2nd = posX - (sizeX/2)-sizeX
			_3rd = posX - (sizeX/2)
			_4th = posX + (sizeX/2)
			_5th = posX + (sizeX/2)+sizeX
			_6th = posX + (sizeX/2)+sizeX+sizeX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
			_4th = posX+sizeX
			_5th = posX+sizeX+sizeX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX - (sizeX/2)-sizeX
			_2nd = posX - (sizeX/2)
			_3rd = posX + (sizeX/2)
			_4th = posX + (sizeX/2)+sizeX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX
			_2nd = posX
			_3rd = posX+sizeX
			
		elseif 10 <= number and number < 100 then
			_1st = posX - (sizeX/2)
			_2nd = posX + (sizeX/2)
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	end
	
	
	-- ���� �׸���
	if number >= 1000000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(mil*spacing), startY)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(hth*spacing), startY)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(myr*spacing), startY)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(tho*spacing), startY)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(hun*spacing), startY)
		drawer:drawTexture(fileName, _6th, posY, sizeX, sizeY, startX+(ten*spacing), startY)
		drawer:drawTexture(fileName, _7th, posY, sizeX, sizeY, startX+(one*spacing), startY)
		
		_left	= _1st
		_right	= _7th
		
	elseif 100000 <= number and number < 1000000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(hth*spacing), startY)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(myr*spacing), startY)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(tho*spacing), startY)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(hun*spacing), startY)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(ten*spacing), startY)
		drawer:drawTexture(fileName, _6th, posY, sizeX, sizeY, startX+(one*spacing), startY)
		
		_left	= _1st
		_right	= _6th
	
	elseif 10000 <= number and number < 100000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(myr*spacing), startY)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(tho*spacing), startY)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(hun*spacing), startY)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(ten*spacing), startY)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(one*spacing), startY)
		
		_left	= _1st
		_right	= _5th
	
	elseif 1000 <= number and number < 10000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(tho*spacing), startY)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(hun*spacing), startY)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(ten*spacing), startY)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(one*spacing), startY)
		
		_left	= _1st
		_right	= _4th
		
	elseif 100 <= number and number < 1000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(hun*spacing), startY)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(ten*spacing), startY)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(one*spacing), startY)
		
		_left	= _1st
		_right	= _3rd
		
	elseif 10 <= number and number < 100 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(ten*spacing), startY)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(one*spacing), startY)
		
		_left	= _1st
		_right	= _2nd
		
	elseif 0 <= number and number < 10 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(one*spacing), startY)
		
		_left	= _1st
		_right	= _1st
	end
	
	return _left, _right
	
end

-- ���ڸ� �޾Ƽ� �ѷ��ش�(����� 1000000(�鸸)����������)
-- �Ű�����(�����̸�, ����, ���Ĺ��, x, y, �ؽ���x, �ؽ���y, ������x, ������y, �ؽ��� ����)
function DrawEachNumberWide(fileName, number, align, posX, posY, startX, startY, sizeX, sizeY, spacing, widetype, ...)
	
	local drawer
	if select('#', ...) == 0 then
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	else
		drawer = select(1, ...)
	end
	
	if number < 0 then
		number = number * -1
	end
	
	local mil = number/1000000
	local hth = (number - (mil*1000000))/100000
	local myr = (number - (mil*1000000 + hth*100000))/10000
	local tho = (number - (mil*1000000 + hth*100000 + myr*10000))/1000
	local hun = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000))/100
	local ten = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000 + hun*100))/10
	local one = number%10
	
	local _left, _right
	local _1st, _2nd, _3rd, _4th, _5th, _6th, _7th
	
	-- ���� ����(1)
	if align == 1 then
		_1st = posX
		_2nd = posX+sizeX
		_3rd = posX+sizeX+sizeX
		_4th = posX+sizeX+sizeX+sizeX
		_5th = posX+sizeX+sizeX+sizeX+sizeX
		_6th = posX+sizeX+sizeX+sizeX+sizeX+sizeX
		_7th = posX+sizeX+sizeX+sizeX+sizeX+sizeX+sizeX
		
	-- ������ ����(2)
	elseif align == 2 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX-sizeX
			_5th = posX-sizeX-sizeX
			_6th = posX-sizeX
			_7th = posX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX
			_5th = posX-sizeX
			_6th = posX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX
			_4th = posX-sizeX
			_5th = posX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
		
		elseif 10 <= number and number < 100 then
			_1st = posX-sizeX
			_2nd = posX
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	
	-- ��� ����(8)	
	elseif align == 8 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			_5th = posX+sizeX
			_6th = posX+sizeX+sizeX
			_7th = posX+sizeX+sizeX+sizeX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX - (sizeX/2)-sizeX-sizeX
			_2nd = posX - (sizeX/2)-sizeX
			_3rd = posX - (sizeX/2)
			_4th = posX + (sizeX/2)
			_5th = posX + (sizeX/2)+sizeX
			_6th = posX + (sizeX/2)+sizeX+sizeX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
			_4th = posX+sizeX
			_5th = posX+sizeX+sizeX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX - (sizeX/2)-sizeX
			_2nd = posX - (sizeX/2)
			_3rd = posX + (sizeX/2)
			_4th = posX + (sizeX/2)+sizeX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX
			_2nd = posX
			_3rd = posX+sizeX
			
		elseif 10 <= number and number < 100 then
			_1st = posX - (sizeX/2)
			_2nd = posX + (sizeX/2)
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	end
	
	
	-- ���� �׸���
	if number >= 1000000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(mil*spacing), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(hth*spacing), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(myr*spacing), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(tho*spacing), startY, widetype)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(hun*spacing), startY, widetype)
		drawer:drawTexture(fileName, _6th, posY, sizeX, sizeY, startX+(ten*spacing), startY, widetype)
		drawer:drawTexture(fileName, _7th, posY, sizeX, sizeY, startX+(one*spacing), startY, widetype)
		
		_left	= _1st
		_right	= _7th
		
	elseif 100000 <= number and number < 1000000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(hth*spacing), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(myr*spacing), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(tho*spacing), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(hun*spacing), startY, widetype)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(ten*spacing), startY, widetype)
		drawer:drawTexture(fileName, _6th, posY, sizeX, sizeY, startX+(one*spacing), startY, widetype)
		
		_left	= _1st
		_right	= _6th
	
	elseif 10000 <= number and number < 100000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(myr*spacing), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(tho*spacing), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(hun*spacing), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(ten*spacing), startY, widetype)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(one*spacing), startY, widetype)
		
		_left	= _1st
		_right	= _5th
	
	elseif 1000 <= number and number < 10000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(tho*spacing), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(hun*spacing), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(ten*spacing), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(one*spacing), startY, widetype)
		
		_left	= _1st
		_right	= _4th
		
	elseif 100 <= number and number < 1000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(hun*spacing), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(ten*spacing), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(one*spacing), startY, widetype)
		
		_left	= _1st
		_right	= _3rd
		
	elseif 10 <= number and number < 100 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(ten*spacing), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(one*spacing), startY, widetype)
		
		_left	= _1st
		_right	= _2nd
		
	elseif 0 <= number and number < 10 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(one*spacing), startY, widetype)
		
		_left	= _1st
		_right	= _1st
	end
	
	return _left, _right
	
end


-- ���ڸ� �޾Ƽ� �ѷ��ش�(����� 1000000(�鸸)����������)
-- �Ű�����(�����̸�, ����, ���Ĺ��, x, y, �ؽ���x, �ؽ���y, ������x, ������y, ��ġ ����, �ؽ��� ����)
function DrawEachNumberWide2(fileName, number, align, posX, posY, startX, startY, sizeX, sizeY, spacingPos, spacingTex, widetype, ...)
	
	local drawer
	if select('#', ...) == 0 then
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	else
		drawer = select(1, ...)
	end
	
	if number < 0 then
		number = number * -1
	end
	
	local mil = number/1000000
	local hth = (number - (mil*1000000))/100000
	local myr = (number - (mil*1000000 + hth*100000))/10000
	local tho = (number - (mil*1000000 + hth*100000 + myr*10000))/1000
	local hun = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000))/100
	local ten = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000 + hun*100))/10
	local one = number%10
	
	local _left, _right
	local _1st, _2nd, _3rd, _4th, _5th, _6th, _7th
	
	-- ���� ����(1)
	if align == 1 then
		_1st = posX
		_2nd = posX+spacingPos
		_3rd = posX+spacingPos+spacingPos
		_4th = posX+spacingPos+spacingPos+spacingPos
		_5th = posX+spacingPos+spacingPos+spacingPos+spacingPos
		_6th = posX+spacingPos+spacingPos+spacingPos+spacingPos+spacingPos
		_7th = posX+spacingPos+spacingPos+spacingPos+spacingPos+spacingPos+spacingPos
		
	-- ������ ����(2)
	elseif align == 2 then
		if number >= 1000000 then
			_1st = posX-spacingPos-spacingPos-spacingPos-spacingPos-spacingPos-spacingPos
			_2nd = posX-spacingPos-spacingPos-spacingPos-spacingPos-spacingPos
			_3rd = posX-spacingPos-spacingPos-spacingPos-spacingPos
			_4th = posX-spacingPos-spacingPos-spacingPos
			_5th = posX-spacingPos-spacingPos
			_6th = posX-spacingPos
			_7th = posX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX-spacingPos-spacingPos-spacingPos-spacingPos-spacingPos
			_2nd = posX-spacingPos-spacingPos-spacingPos-spacingPos
			_3rd = posX-spacingPos-spacingPos-spacingPos
			_4th = posX-spacingPos-spacingPos
			_5th = posX-spacingPos
			_6th = posX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-spacingPos-spacingPos-spacingPos-spacingPos
			_2nd = posX-spacingPos-spacingPos-spacingPos
			_3rd = posX-spacingPos-spacingPos
			_4th = posX-spacingPos
			_5th = posX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX-spacingPos-spacingPos-spacingPos
			_2nd = posX-spacingPos-spacingPos
			_3rd = posX-spacingPos
			_4th = posX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-spacingPos-spacingPos
			_2nd = posX-spacingPos
			_3rd = posX
		
		elseif 10 <= number and number < 100 then
			_1st = posX-spacingPos
			_2nd = posX
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	
	-- ��� ����(8)	
	elseif align == 8 then
		if number >= 1000000 then
			_1st = posX-spacingPos-spacingPos-spacingPos
			_2nd = posX-spacingPos-spacingPos
			_3rd = posX-spacingPos
			_4th = posX
			_5th = posX+spacingPos
			_6th = posX+spacingPos+spacingPos
			_7th = posX+spacingPos+spacingPos+spacingPos
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX - (spacingPos/2)-spacingPos-spacingPos
			_2nd = posX - (spacingPos/2)-spacingPos
			_3rd = posX - (spacingPos/2)
			_4th = posX + (spacingPos/2)
			_5th = posX + (spacingPos/2)+spacingPos
			_6th = posX + (spacingPos/2)+spacingPos+spacingPos
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-spacingPos-spacingPos
			_2nd = posX-spacingPos
			_3rd = posX
			_4th = posX+spacingPos
			_5th = posX+spacingPos+spacingPos
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX - (spacingPos/2)-spacingPos
			_2nd = posX - (spacingPos/2)
			_3rd = posX + (spacingPos/2)
			_4th = posX + (spacingPos/2)+spacingPos
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-spacingPos
			_2nd = posX
			_3rd = posX+spacingPos
			
		elseif 10 <= number and number < 100 then
			_1st = posX - (spacingPos/2)
			_2nd = posX + (spacingPos/2)
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	end
	
	
	-- ���� �׸���
	if number >= 1000000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(mil*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(hth*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(myr*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(tho*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(hun*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _6th, posY, sizeX, sizeY, startX+(ten*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _7th, posY, sizeX, sizeY, startX+(one*spacingTex), startY, widetype)
		
		_left	= _1st
		_right	= _7th
		
	elseif 100000 <= number and number < 1000000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(hth*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(myr*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(tho*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(hun*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(ten*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _6th, posY, sizeX, sizeY, startX+(one*spacingTex), startY, widetype)
		
		_left	= _1st
		_right	= _6th
	
	elseif 10000 <= number and number < 100000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(myr*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(tho*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(hun*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(ten*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _5th, posY, sizeX, sizeY, startX+(one*spacingTex), startY, widetype)
		
		_left	= _1st
		_right	= _5th
	
	elseif 1000 <= number and number < 10000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(tho*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(hun*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(ten*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _4th, posY, sizeX, sizeY, startX+(one*spacingTex), startY, widetype)
		
		_left	= _1st
		_right	= _4th
		
	elseif 100 <= number and number < 1000 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(hun*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(ten*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _3rd, posY, sizeX, sizeY, startX+(one*spacingTex), startY, widetype)
		
		_left	= _1st
		_right	= _3rd
		
	elseif 10 <= number and number < 100 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(ten*spacingTex), startY, widetype)
		drawer:drawTexture(fileName, _2nd, posY, sizeX, sizeY, startX+(one*spacingTex), startY, widetype)
		
		_left	= _1st
		_right	= _2nd
		
	elseif 0 <= number and number < 10 then
		drawer:drawTexture(fileName, _1st, posY, sizeX, sizeY, startX+(one*spacingTex), startY, widetype)
		
		_left	= _1st
		_right	= _1st
	end
	
	return _left, _right
	
end



-- ���ڸ� �޾Ƽ� �ѷ��ش�(����� 1000000(�鸸)����������)
-- �Ű�����(�����̸�, ����, ���Ĺ��, x, y, �ؽ���x, �ؽ���y, ������x, ������y, �ؽ��� ����, ����)
function DrawEachNumberA(fileName, number, align, posX, posY, startX, startY, sizeX, sizeY, spacing, alpha, ...)

	local drawer
	if select('#', ...) == 0 then
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	else
		drawer = select(1, ...)
	end
	
	if number < 0 then
		number = number * -1
	end
	
	local mil = number/1000000
	local hth = (number - (mil*1000000))/100000
	local myr = (number - (mil*1000000 + hth*100000))/10000
	local tho = (number - (mil*1000000 + hth*100000 + myr*10000))/1000
	local hun = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000))/100
	local ten = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000 + hun*100))/10
	local one = number%10
	
	local _left, _right
	local _1st, _2nd, _3rd, _4th, _5th, _6th, _7th
	
	-- ���� ����(1)
	if align == 1 then
		_1st = posX
		_2nd = posX+sizeX
		_3rd = posX+sizeX+sizeX
		_4th = posX+sizeX+sizeX+sizeX
		_5th = posX+sizeX+sizeX+sizeX+sizeX
		_6th = posX+sizeX+sizeX+sizeX+sizeX+sizeX
		_7th = posX+sizeX+sizeX+sizeX+sizeX+sizeX+sizeX
		
	-- ������ ����(2)
	elseif align == 2 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX-sizeX
			_5th = posX-sizeX-sizeX
			_6th = posX-sizeX
			_7th = posX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX
			_5th = posX-sizeX
			_6th = posX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX
			_4th = posX-sizeX
			_5th = posX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
		
		elseif 10 <= number and number < 100 then
			_1st = posX-sizeX
			_2nd = posX
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	
	-- ��� ����(8)	
	elseif align == 8 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			_5th = posX+sizeX
			_6th = posX+sizeX+sizeX
			_7th = posX+sizeX+sizeX+sizeX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX - (sizeX/2)-sizeX-sizeX
			_2nd = posX - (sizeX/2)-sizeX
			_3rd = posX - (sizeX/2)
			_4th = posX + (sizeX/2)
			_5th = posX + (sizeX/2)+sizeX
			_6th = posX + (sizeX/2)+sizeX+sizeX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
			_4th = posX+sizeX
			_5th = posX+sizeX+sizeX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX - (sizeX/2)-sizeX
			_2nd = posX - (sizeX/2)
			_3rd = posX + (sizeX/2)
			_4th = posX + (sizeX/2)+sizeX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX
			_2nd = posX
			_3rd = posX+sizeX
			
		elseif 10 <= number and number < 100 then
			_1st = posX - (sizeX/2)
			_2nd = posX + (sizeX/2)
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	end
	
	
	-- ���� �׸���
	if number >= 1000000 then
		drawer:drawTextureA(fileName, _1st, posY, sizeX, sizeY, startX+(mil*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _2nd, posY, sizeX, sizeY, startX+(hth*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _3rd, posY, sizeX, sizeY, startX+(myr*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _4th, posY, sizeX, sizeY, startX+(tho*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _5th, posY, sizeX, sizeY, startX+(hun*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _6th, posY, sizeX, sizeY, startX+(ten*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _7th, posY, sizeX, sizeY, startX+(one*spacing), startY, alpha)
		
		_left	= _1st
		_right	= _7th
		
	elseif 100000 <= number and number < 1000000 then
		drawer:drawTextureA(fileName, _1st, posY, sizeX, sizeY, startX+(hth*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _2nd, posY, sizeX, sizeY, startX+(myr*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _3rd, posY, sizeX, sizeY, startX+(tho*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _4th, posY, sizeX, sizeY, startX+(hun*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _5th, posY, sizeX, sizeY, startX+(ten*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _6th, posY, sizeX, sizeY, startX+(one*spacing), startY, alpha)
		
		_left	= _1st
		_right	= _6th
	
	elseif 10000 <= number and number < 100000 then
		drawer:drawTextureA(fileName, _1st, posY, sizeX, sizeY, startX+(myr*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _2nd, posY, sizeX, sizeY, startX+(tho*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _3rd, posY, sizeX, sizeY, startX+(hun*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _4th, posY, sizeX, sizeY, startX+(ten*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _5th, posY, sizeX, sizeY, startX+(one*spacing), startY, alpha)
		
		_left	= _1st
		_right	= _5th
	
	elseif 1000 <= number and number < 10000 then
		drawer:drawTextureA(fileName, _1st, posY, sizeX, sizeY, startX+(tho*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _2nd, posY, sizeX, sizeY, startX+(hun*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _3rd, posY, sizeX, sizeY, startX+(ten*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _4th, posY, sizeX, sizeY, startX+(one*spacing), startY, alpha)
		
		_left	= _1st
		_right	= _4th
		
	elseif 100 <= number and number < 1000 then
		drawer:drawTextureA(fileName, _1st, posY, sizeX, sizeY, startX+(hun*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _2nd, posY, sizeX, sizeY, startX+(ten*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _3rd, posY, sizeX, sizeY, startX+(one*spacing), startY, alpha)
		
		_left	= _1st
		_right	= _3rd
		
	elseif 10 <= number and number < 100 then
		drawer:drawTextureA(fileName, _1st, posY, sizeX, sizeY, startX+(ten*spacing), startY, alpha)
		drawer:drawTextureA(fileName, _2nd, posY, sizeX, sizeY, startX+(one*spacing), startY, alpha)
		
		_left	= _1st
		_right	= _2nd
		
	elseif 0 <= number and number < 10 then
		drawer:drawTextureA(fileName, _1st, posY, sizeX, sizeY, startX+(one*spacing), startY, alpha)
		
		_left	= _1st
		_right	= _1st
	end
	
	return _left, _right
	
end





-- ���ڸ� �޾Ƽ� �ѷ��ش�(����� 1000000(�鸸)����������)
-- �Ű�����(�����̸�, ����, ���Ĺ��, x, y, �ؽ���x, �ؽ���y, ������x, ������y, �ؽ��� ����, ����)
function DrawEachNumberAS(fileName, number, align, posX, posY, startX, startY, sizeX, sizeY, spacing, alpha, scaleX, scaleY, widetype, ...)
	
	local angle = 0
	local drawer = nil
	if select('#', ...) == 0 then
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	else
		drawer = select(1, ...)
	end
	
	if drawer == nil then
		return
	end
	
	if number < 0 then
		number = number * -1
	end
	
	local mil = number/1000000
	local hth = (number - (mil*1000000))/100000
	local myr = (number - (mil*1000000 + hth*100000))/10000
	local tho = (number - (mil*1000000 + hth*100000 + myr*10000))/1000
	local hun = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000))/100
	local ten = (number - (mil*1000000 + hth*100000 + myr*10000 + tho*1000 + hun*100))/10
	local one = number%10
	
	local _left, _right
	local _1st, _2nd, _3rd, _4th, _5th, _6th, _7th
	
	-- ���� ����(1)
	if align == 1 then
		_1st = posX
		_2nd = posX+sizeX
		_3rd = posX+sizeX+sizeX
		_4th = posX+sizeX+sizeX+sizeX
		_5th = posX+sizeX+sizeX+sizeX+sizeX
		_6th = posX+sizeX+sizeX+sizeX+sizeX+sizeX
		_7th = posX+sizeX+sizeX+sizeX+sizeX+sizeX+sizeX
		
	-- ������ ����(2)
	elseif align == 2 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX-sizeX
			_5th = posX-sizeX-sizeX
			_6th = posX-sizeX
			_7th = posX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX-sizeX
			_4th = posX-sizeX-sizeX
			_5th = posX-sizeX
			_6th = posX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX-sizeX
			_3rd = posX-sizeX-sizeX
			_4th = posX-sizeX
			_5th = posX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
		
		elseif 10 <= number and number < 100 then
			_1st = posX-sizeX
			_2nd = posX
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	
	-- ��� ����(8)	
	elseif align == 8 then
		if number >= 1000000 then
			_1st = posX-sizeX-sizeX-sizeX
			_2nd = posX-sizeX-sizeX
			_3rd = posX-sizeX
			_4th = posX
			_5th = posX+sizeX
			_6th = posX+sizeX+sizeX
			_7th = posX+sizeX+sizeX+sizeX
			
		elseif 100000 <= number and number < 1000000 then
			_1st = posX - (sizeX/2)-sizeX-sizeX
			_2nd = posX - (sizeX/2)-sizeX
			_3rd = posX - (sizeX/2)
			_4th = posX + (sizeX/2)
			_5th = posX + (sizeX/2)+sizeX
			_6th = posX + (sizeX/2)+sizeX+sizeX
		
		elseif 10000 <= number and number < 100000 then
			_1st = posX-sizeX-sizeX
			_2nd = posX-sizeX
			_3rd = posX
			_4th = posX+sizeX
			_5th = posX+sizeX+sizeX
			
		elseif 1000 <= number and number < 10000 then
			_1st = posX - (sizeX/2)-sizeX
			_2nd = posX - (sizeX/2)
			_3rd = posX + (sizeX/2)
			_4th = posX + (sizeX/2)+sizeX
			
		elseif 100 <= number and number < 1000 then
			_1st = posX-sizeX
			_2nd = posX
			_3rd = posX+sizeX
			
		elseif 10 <= number and number < 100 then
			_1st = posX - (sizeX/2)
			_2nd = posX + (sizeX/2)
			
		elseif 0 <= number and number < 10 then
			_1st = posX
		end
		
	end
	
	
	-- ���� �׸���
	if number >= 1000000 then
		drawer:drawTextureWithScale_Angle_Offset(fileName, _1st, posY, sizeX, sizeY, startX+(mil*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _2nd, posY, sizeX, sizeY, startX+(hth*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _3rd, posY, sizeX, sizeY, startX+(myr*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _4th, posY, sizeX, sizeY, startX+(tho*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _5th, posY, sizeX, sizeY, startX+(hun*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _6th, posY, sizeX, sizeY, startX+(ten*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _7th, posY, sizeX, sizeY, startX+(one*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		
		_left	= _1st
		_right	= _7th
		
	elseif 100000 <= number and number < 1000000 then
		drawer:drawTextureWithScale_Angle_Offset(fileName, _1st, posY, sizeX, sizeY, startX+(hth*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _2nd, posY, sizeX, sizeY, startX+(myr*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _3rd, posY, sizeX, sizeY, startX+(tho*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _4th, posY, sizeX, sizeY, startX+(hun*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _5th, posY, sizeX, sizeY, startX+(ten*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _6th, posY, sizeX, sizeY, startX+(one*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		
		_left	= _1st
		_right	= _6th
	
	elseif 10000 <= number and number < 100000 then
		drawer:drawTextureWithScale_Angle_Offset(fileName, _1st, posY, sizeX, sizeY, startX+(myr*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _2nd, posY, sizeX, sizeY, startX+(tho*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _3rd, posY, sizeX, sizeY, startX+(hun*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _4th, posY, sizeX, sizeY, startX+(ten*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _5th, posY, sizeX, sizeY, startX+(one*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		
		_left	= _1st
		_right	= _5th
	
	elseif 1000 <= number and number < 10000 then
		drawer:drawTextureWithScale_Angle_Offset(fileName, _1st, posY, sizeX, sizeY, startX+(tho*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _2nd, posY, sizeX, sizeY, startX+(hun*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _3rd, posY, sizeX, sizeY, startX+(ten*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _4th, posY, sizeX, sizeY, startX+(one*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		
		_left	= _1st
		_right	= _4th
		
	elseif 100 <= number and number < 1000 then
		drawer:drawTextureWithScale_Angle_Offset(fileName, _1st, posY, sizeX, sizeY, startX+(hun*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _2nd, posY, sizeX, sizeY, startX+(ten*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _3rd, posY, sizeX, sizeY, startX+(one*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		
		_left	= _1st
		_right	= _3rd
		
	elseif 10 <= number and number < 100 then
		drawer:drawTextureWithScale_Angle_Offset(fileName, _1st, posY, sizeX, sizeY, startX+(ten*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		drawer:drawTextureWithScale_Angle_Offset(fileName, _2nd, posY, sizeX, sizeY, startX+(one*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		
		_left	= _1st
		_right	= _2nd
		
	elseif 0 <= number and number < 10 then
		drawer:drawTextureWithScale_Angle_Offset(fileName, _1st, posY, sizeX, sizeY, startX+(one*spacing), startY, scaleX, scaleY, alpha, 0, 8, 100, 0, widetype)
		
		_left	= _1st
		_right	= _1st
	end
	
	return _left, _right
	
end




-- ��ũ���� �����ϱ�(�±�)
function ShowThaiScreenshotInfo(passTick, characterName, desc)
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 16)
	
	if string.len(desc) > 0 then
		local tick = 4400 - passTick
		if tick <= 0 then
			tick = 0
		end
		if tick >= 255 then
			tick = 255
		end
		
		local nameSize = GetStringSize(g_STRING_FONT_GULIMCHE, 16, characterName)
		common_DrawOutlineText1(drawer, characterName, 760-nameSize/2, 640, 0,0,0,tick, 255,0,0,tick)
		
		local descSize = GetStringSize(g_STRING_FONT_GULIMCHE, 16, desc)
		common_DrawOutlineText1(drawer, desc, 760-descSize/2, 662, 0,0,0,tick, 255,0,0,tick)
	end
end



-- ��ũ���� �����ϱ�
function ShowScreenshotInfo(passTick, saveName1, saveName2, saveName3)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 16)

	if string.len(saveName1) > 0 then
		local tick = 4400 - passTick
		if tick <= 0 then
			tick = 0
		end
		if tick >= 255 then
			tick = 255
		end
		local nameSize = GetStringSize(g_STRING_FONT_GULIMCHE, 16, saveName1)
		common_DrawOutlineText1(drawer, saveName1, 512-nameSize/2, 200, 0,0,0,tick, 153,255,255,tick, WIDETYPE_3)
	end
	
	if string.len(saveName2) > 0 then
		local tick = 4600 - passTick
		if tick <= 0 then
			tick = 0
		end
		if tick >= 255 then
			tick = 255
		end
		local nameSize = GetStringSize(g_STRING_FONT_GULIMCHE, 16, saveName2)
		common_DrawOutlineText1(drawer, saveName2, 512-nameSize/2, 225, 0,0,0,tick, 153,255,255,tick)
	end
	
	if string.len(saveName3) > 0 then
		local tick = 4800 - passTick
		if tick <= 0 then
			tick = 0
		end
		if tick >= 255 then
			tick = 255
		end
		local nameSize = GetStringSize(g_STRING_FONT_GULIMCHE, 16, saveName3)
		common_DrawOutlineText1(drawer, saveName3, 512-nameSize/2, 250, 0,0,0,tick, 153,255,255,tick)
	end

end




-- ���̵� ��
function ShowFadeIn(alpha, divide)
	if divide <= 0 then
		return
	end
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:drawTextureSA("UIData/blackFadeIn.tga", 0, 0, 1024, 768, 0, 0, 512, 512,  alpha/divide, 0, 0)
end



-- ģ������ �޼���
function ShowEnterFriendInfo(passTick, saveName1, saveName2, saveName3)

	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_DODUMCHE, 12)

	if string.len(saveName1) > 0 then
		local tick = 4400 - passTick
		if tick <= 0 then
			tick = 0
		end
		if tick >= 255 then
			tick = 255
		end
		local nameSize = GetStringSize(g_STRING_FONT_DODUMCHE, 12, saveName1)
		common_DrawOutlineText1(drawer, saveName1, 890-nameSize/2, 640, 0,0,0,tick, 97,230,240,tick, WIDETYPE_3)
	end
	
	if string.len(saveName2) > 0 then
		local tick = 4600 - passTick
		if tick <= 0 then
			tick = 0
		end
		if tick >= 255 then
			tick = 255
		end
		local nameSize = GetStringSize(g_STRING_FONT_DODUMCHE, 12, saveName2)
		common_DrawOutlineText1(drawer, saveName2, 890-nameSize/2, 657, 0,0,0,tick, 97,230,240,tick, WIDETYPE_3)
	end
	
	if string.len(saveName3) > 0 then
		local tick = 4800 - passTick
		if tick <= 0 then
			tick = 0
		end
		if tick >= 255 then
			tick = 255
		end
		local nameSize = GetStringSize(g_STRING_FONT_DODUMCHE, 12, saveName3)
		common_DrawOutlineText1(drawer, saveName3, 890-nameSize/2, 674, 0,0,0,tick, 97,230,240,tick, WIDETYPE_3)
	end

end




--------------------------------------------------------------------

-- �ε�ȭ���� �����ش�.

--------------------------------------------------------------------
function ShowGameLoading(image)
	if image >= 0 then
		drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
		
		local imageName = "UIData/gameLoadingW_"..image..".dds"
		--drawer:drawTexture(imageName, 0, 0, 1024, 768, 0, 0)
		drawer:drawTextureBackImage(imageName, 0, 0, 1920, 1200, 0, 0)
	end
end





--------------------------------------------------------------------

--	���� �̿��� �̹��� �����ֱ�

--------------------------------------------------------------------
function ShowGameRatingMark()
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:drawTexture("UIData/FirstLoadingImage.tga", 784, 0, 260, 158, 0, 769, WIDETYPE_1)
end





--------------------------------------------------------------------

--	���� ������ ����

--------------------------------------------------------------------
function RenderBuffTooltip(drawer, px, py, text, ...)
	
	local real_str_chat = text;
	
	if arg.n ~= 0 then
		real_str_chat = real_str_chat.."\n"..arg[1]
	end
	
	if string.len(real_str_chat) <= 0 then
		return;
	end
			
	local twidth, theight = GetBooleanTextSize(real_str_chat, g_STRING_FONT_GULIMCHE, 14);
	local text_area_x = twidth;
	local text_area_y = theight;
	local text_area_zoom_x, text_area_zoom_y = GetTextAreaZoomValue(text_area_x, text_area_y, 7);
	
	
	-- ��� ���� �ϱ�
	local ctrl_x = px-(7+7+text_area_x)/2;
	local ctrl_y = py-text_area_y-50;

	local zoom_x = 255;
	local zoom_y = 255;
	local alpha_value = 180;
		
--	drawer = root:getDrawer();
	
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x, ctrl_y, 7, 7, 263, 65, zoom_x, zoom_y, alpha_value, 0, 0);								-- top_left
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x+7+text_area_x, ctrl_y, 7, 7, 309, 65, zoom_x, zoom_y, alpha_value, 0, 0);				-- top_right
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x, ctrl_y+7+text_area_y, 7, 7, 263, 87, zoom_x, zoom_y, alpha_value, 0, 0);				-- bottom_left
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x+7+text_area_x, ctrl_y+7+text_area_y, 7, 7, 309, 87, zoom_x, zoom_y, alpha_value, 0, 0);	-- bottom_right
	
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x+7, ctrl_y, 7, 7, 263+7, 65, text_area_zoom_x, zoom_y, alpha_value, 0, 0)					-- top_edge
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x+7, ctrl_y+7+text_area_y, 7, 7, 263+7, 87, text_area_zoom_x, zoom_y, alpha_value, 0, 0)	-- bottom_edge
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x, ctrl_y+7, 7, 7, 263, 65+7, zoom_x, text_area_zoom_y, alpha_value, 0, 0)					-- left edge
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x+7+text_area_x, ctrl_y+7, 7, 7, 309, 65+7, zoom_x, text_area_zoom_y, alpha_value, 0, 0)	-- right edge
	
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x+7, ctrl_y+7, 7, 7, 263+7, 65+7, text_area_zoom_x, text_area_zoom_y, alpha_value, 0, 0)	-- center
	
	-- ��ǳ�� ���� �׸���
	drawer:drawTextureSA('TaharezLook.tga', ctrl_x+7/2+text_area_x/2-4, ctrl_y+7+text_area_y+7-2, 17, 9, 277, 92, zoom_x, zoom_y, alpha_value, 0, 0);	-- tail
	
	-- �ؽ�Ʈ �׸���
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
	drawer:setTextColor(180,0,180,255)
	drawer:drawText(text, ctrl_x+7, ctrl_y+7);
	
	if arg.n ~= 0 then
		drawer:setTextColor(0,0,0,255)
		drawer:drawText(arg[1], ctrl_x+7, ctrl_y+24);
	end
end

------------------------------------------
-- root�� �������� ���� ��ġ�� ���Ѵ�.
------------------------------------------
function GetBasicRootPoint(window)
	if window:isVisible() == false then
		return
	end
	local windowpos	= window:getPosition()
	local parentWindow = window:getParent()
	local parentPos = parentWindow:getPosition()
	local posx = windowpos.x.offset
	local posy = windowpos.y.offset
	
	if parentWindow:getName() ~= "DefaultWindow" then
	--if winMgr:getWindow("DefaultWindow") ~= parentWindow then
	--if parentPos.x.offset ~= 0 and parentPos.y.offset ~= 0 then
		local a, b = GetBasicRootPoint(parentWindow)
		posx = posx + a
		posy = posy + b
	end
		
	return posx, posy
end



function GetSelectWindowPos(window, targetWindow)
	if window:isVisible() == false then
		return
	end
	local windowpos	= window:getPosition()
	local parentWindow = window:getParent()
	local posx = windowpos.x.offset
	local posy = windowpos.y.offset
	
	if parentWindow:getName() ~= "DefaultWindow" then
		if window:getName() == targetWindow:getName() then
			return posx, posy
		end
		local a, b = GetSelectWindowPos(parentWindow, targetWindow)
		posx = posx + a
		posy = posy + b
	end
		
	return posx, posy
end





function GetBundleCostum()
	for i=1,  #tBundleCostum do
		for j=1,  #tBundleCostum[i] do
			local size = #tBundleCostum[i]
			if size ~= nil and size > 0 then
				SettingBundleCostum(size, i, j, tBundleCostum[i][j])
			end			
		end
	end
end

-- ��Ƽ��� ����Ʈ �ڽ��� üũ�Ѵ�.
function ForLuaCheckActivationEditBox()

	local activeWindow = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getActiveChild()
	local windowType = activeWindow:getType()
	if activeWindow:isVisible() then
		if windowType == "TaharezLook/Editbox" then
			return true
		end
	end
	return false
end
--------------------------------------------------------------------

--	��� ESC, ENTERŰ�� ���� ���̺� ���

--------------------------------------------------------------------

-------------------------------------
--	ESC Ű�� ���� ������, �Լ����
-------------------------------------
g_tEscEventWindow	= { ["err"]=0 }
g_tEscEventFunction = { ["err"]=0 }
function RegistEscEventInfo(windowName, functionName)
	table.insert(g_tEscEventWindow, tostring(windowName))
	table.insert(g_tEscEventFunction, tostring(functionName))
end



-------------------------------------
--	ENTER Ű�� ���� ������, �Լ����
-------------------------------------
g_EnterEventState = false
g_tEnterEventWindow	  = { ["err"]=0 }
g_tEnterEventFunction = { ["err"]=0 }
function RegistEnterEventInfo(windowName, functionName)
	table.insert(g_tEnterEventWindow, tostring(windowName))
	table.insert(g_tEnterEventFunction, tostring(functionName))
end



-------------------------------------
--	ENTER Ű�� ���� �����Լ�
-------------------------------------
g_tEnterExceptionFunction = { ["err"]=0 }
function RegistEnterExceptionInfo(exception)
	table.insert(g_tEnterExceptionFunction, tostring(exception))
end





-- 0 = WND_SELECTCHANNEL,	WND_LOBBY,	WND_BATTLEROOM,	WND_MYROOM,	WND_ITEMSHOP,	WND_SKILLSHOP,	WND_CREATECHARACTER,
-- WND_GAMELOADING,	WND_GAME,	WND_GAMERESULT,	WND_RANK,	WND_PRACTICE,	WND_VILLAGE,	WND_QUESTLOBBY,
-- WND_QUESTROOM,		WND_QUEST,	WND_QUESTRESULT,WND_QUESTLOADING,	WND_CHANGECLASS,	WND_LOGIN,	WND_COUNT,
-- WND_CLUBLOBBY,		WND_SELECTCHARACTER,



local tWindowTypeTable = {['err']=0, [0] = 0, 6, 0, 3, 1, 0, 0, 0, 0, 0, 0, 0, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}
-- �����, ����, �����̹�, �����̵�
local tDetailTypeTable = {['err']=0, 2, 4, 7, 8}

local tHelpImageTable = {['err']=0
	, "help_shop.tga"		-- ��
	, "help_hunt.tga"		-- �����
	, "help_myroom.tga"		-- ���̷�
	, "help_deathmatch.tga"	-- ����
	, "help_square.tga"		-- ����
	, "help_lobby.tga"		-- �κ�
	, "help_survival.tga"	-- �����̹�(���ͷ��̽�)
	, "help_arcade.tga"		-- �����̵�
	}

RegistEscEventInfo("InGameHelpWindow", "HideHelpImage")

function ShowHelpImage(windowType, detailType)
	local IngameHelpWindow = CEGUI.WindowManager:getSingleton():getWindow("InGameHelpWindow")
	local rootWindow	   = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow")
	if IngameHelpWindow then
		if IngameHelpWindow:isVisible() then
			IngameHelpWindow:setVisible(false)
			return
		end		
	else
		--------------------------------------------------------------------
		-- �ΰ��� �����̹���
		--------------------------------------------------------------------
		IngameHelpWindow = winMgr:createWindow("TaharezLook/StaticImage", "InGameHelpWindow")
		IngameHelpWindow:setTexture("Enabled", "UIData/invisible.tga", 0, 0)
		IngameHelpWindow:setWideType(6)
		IngameHelpWindow:setPosition(0, 0)
		IngameHelpWindow:setSize(1024, 768)
		IngameHelpWindow:setVisible(false)
		IngameHelpWindow:setAlwaysOnTop(true)
		IngameHelpWindow:setZOrderingEnabled(false)
		rootWindow:addChildWindow(IngameHelpWindow)
	end
	
	-- ������ Ÿ���� �������� �ʴ´ٸ�
	if 0 > windowType or windowType > #tWindowTypeTable then
		return
	end
	
	local helpImageIndex = tWindowTypeTable[windowType]
	local helpImage = ""	
	
	if helpImageIndex <= 0 or helpImageIndex > #tHelpImageTable then	
		if 0 < detailType and detailType <= #tDetailTypeTable then
			local helpImageDetailIndex = tDetailTypeTable[detailType]
			helpImage = tHelpImageTable[helpImageDetailIndex]
		end
	else
		helpImage = tHelpImageTable[helpImageIndex]
	end
	
	if helpImage ~= "" then
		
		if IngameHelpWindow then
			
			rootWindow:addChildWindow(IngameHelpWindow)
			--IngameHelpWindow:setTexture("Enabled", "UIData/"..helpImage, 0, 0)
			IngameHelpWindow:setTexture("Enabled", "UIData/F1-Help.tga", 0, 0)				
			IngameHelpWindow:setVisible(true)
		end	
	end
end

function HideHelpImage()
	if CEGUI.WindowManager:getSingleton():getWindow("InGameHelpWindow") then
		CEGUI.WindowManager:getSingleton():getWindow("InGameHelpWindow"):setVisible(false)
	end
end


tGradeferPersent = {['err'] = 0, }
--for i=1, 10 do
for i=1, NFREE_MAX_SKILL_UPGRADE_LEVEL do
	tGradeferPersent[i] = GetSkillUpgradeDamage(i)
end



-- ��Ʈ���� �κкκ� ������ �־��ٶ� ���
function cuttingString(mainString, tbufStringTable, tbufSpecialTable, count)
	local startIndex, endIndex = string.find(mainString, "%$")
	
	if startIndex ~= nil then
		tbufStringTable[count] = string.sub(mainString, 1, startIndex - 1)
		tbufSpecialTable[count]= 0
		count = count + 1
		
		local remainDesc = string.sub(mainString, endIndex + 1)
		local startIndex2, endIndex2 = string.find(remainDesc, "%$")
		if startIndex2 ~= nil then
			tbufStringTable[count] = string.sub(remainDesc, 1, startIndex2 - 1)
			tbufSpecialTable[count]= string.sub(remainDesc, endIndex2+1, endIndex2+1)
			count = count + 1
			local remainDesc2 = string.sub(remainDesc, endIndex2 + 2)
			local tStringTable, tSpecialTable = cuttingString(remainDesc2, tbufStringTable, tbufSpecialTable, count)
			return tStringTable, tSpecialTable
		else
			count = count - 1
			tbufStringTable[count] = mainString
			tbufSpecialTable[count] = 0
			return tbufStringTable, tbufSpecialTable	
		end
	else
		tbufStringTable[count] = mainString
		tbufSpecialTable[count] = 0
		return tbufStringTable, tbufSpecialTable	
	end
end



-- �ش� �ؽ�Ʈ�߿� �ؽ�Ʈ�� ��󳽴�.
function findTextErase(targetText, selectText)
	local startPos, endPos = string.find(targetText, selectText);
	local ResultText = targetText
		
	if startPos ~= nil and startPos == 1 then
		ResultText = string.sub(targetText, endPos + 1)
	else
		ResultText = targetText	
	end
	return ResultText
end


----------------------------------------------------

-- Ű�Է�

----------------------------------------------------
local MODE_BATTLE = 0
local MODE_ARCADE = 1
local MODE_HUNTINT = 2
local MODE_PRACTICE = 3
local ALPHA_VALUE = 180

-- ���ʴ��						UP,DOWN,LEFT,RIGHT,D,S,A,		S,S,S,S,			S,S,S,S,			DASH,S,S,S,S,			E,W,Q,			-,-,OR
local tKeyImgTexX = {["err"]=0, 0,21,42,63,42,21,0,				21,21,21,21,		21,21,21,21,		63,21,21,21,21,			42,21,0,		84,84,84}
local tKeyImgTexY = {["err"]=0, 113,113,113,113,155,155,155,	155,155,155,155,	155,155,155,155,	134,155,155,155,155,	134,134,134,	134,134,113}

-- ��ų �ߵ� ���̹����� �׸���.
local PLAYMODE_GAME_POSY = 480
local PLAYMODE_PRACTICE_POSY = 480
local PLAYMODE_ARCADE_POSY = 480--630
function RenderBackImageOfSkillList(bShow, playMode, i, promotionIndex, styleIndex, attributeIndex, skillName, skillDesc)
	
	if bShow == 0 then
		return
	end
	
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
	
	-- [ ���ӿ��� ]
	if playMode == PLAYMODE_GAME then
		drawer:drawTextureA("UIData/KyeOutput.tga", 834, PLAYMODE_GAME_POSY-(i*96), 186, 96, 0, 0, ALPHA_VALUE, WIDETYPE_1)		-- ��ų �� �̹���
		drawer:drawTextureWithScale_Angle_Offset("UIData/Skill_up2.tga", 894, PLAYMODE_GAME_POSY+11-(i*96), 89, 35, 
				tAttributeImgTexXTable[styleIndex][attributeIndex], tAttributeImgTexYTable[styleIndex][attributeIndex],			-- ���� Ŭ����
				200, 200, ALPHA_VALUE, 0, 8, 100, 0, WIDETYPE_1)
		drawer:drawTextureWithScale_Angle_Offset("UIData/Skill_up2.tga", 894, PLAYMODE_GAME_POSY+11-(i*96), 89, 35,				-- ���� Ŭ����
				promotionImgTexXTable[styleIndex], promotionImgTexYTable[promotionIndex],
				200, 200, ALPHA_VALUE, 0, 8, 100, 0, WIDETYPE_1)
			
		-- ��ų ����
		drawer:setTextColor(255, 255, 255, 255)
		local size1 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, skillDesc)
		drawer:drawText(skillDesc, 927-size1/2, PLAYMODE_GAME_POSY+27-(i*96), WIDETYPE_1)
		
		-- ��ų�̸�
		drawer:setTextColor(255, 200, 80, 255)
		local size2 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, skillName)
		drawer:drawText(skillName, 927-size2/2, PLAYMODE_GAME_POSY+45-(i*96), WIDETYPE_1)
	
	-- [ �����忡�� ]
	elseif playMode == PLAYMODE_PRACTICE then
		drawer:drawTextureA("UIData/KyeOutput.tga", 834, PLAYMODE_PRACTICE_POSY-(i*96), 186, 96, 0, 0, ALPHA_VALUE, WIDETYPE_1)
		drawer:drawTextureWithScale_Angle_Offset("UIData/Skill_up2.tga", 894, PLAYMODE_PRACTICE_POSY+11-(i*96), 89, 35, 
				tAttributeImgTexXTable[styleIndex][attributeIndex], tAttributeImgTexYTable[styleIndex][attributeIndex], 
				200, 200, ALPHA_VALUE, 0, 8, 100, 0, WIDETYPE_1)
		drawer:drawTextureWithScale_Angle_Offset("UIData/Skill_up2.tga", 894, PLAYMODE_PRACTICE_POSY+11-(i*96), 89, 35, 
				promotionImgTexXTable[styleIndex], promotionImgTexYTable[promotionIndex],
				200, 200, ALPHA_VALUE, 0, 8, 100, 0, WIDETYPE_1)
		
		-- ��ų ����
		drawer:setTextColor(255, 255, 255, 255)
		local size1 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, skillDesc)
		drawer:drawText(skillDesc, 927-size1/2, PLAYMODE_PRACTICE_POSY+27-(i*96), WIDETYPE_1)
		
		-- ��ų�̸�
		drawer:setTextColor(255, 200, 80, 255)
		local size2 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, skillName)
		drawer:drawText(skillName, 927-size2/2, PLAYMODE_PRACTICE_POSY+45-(i*96), WIDETYPE_1)
	
	-- [ �����̵�, ����Ϳ��� ]
	elseif playMode == PLAYMODE_QUEST then
		drawer:drawTextureA("UIData/KyeOutput.tga", 834, PLAYMODE_ARCADE_POSY-(i*96), 186, 96, 0, 0, ALPHA_VALUE, WIDETYPE_1)
		drawer:drawTextureWithScale_Angle_Offset("UIData/Skill_up2.tga", 894, PLAYMODE_ARCADE_POSY+11-(i*96), 89, 35, 
				tAttributeImgTexXTable[styleIndex][attributeIndex], tAttributeImgTexYTable[styleIndex][attributeIndex], 
				200, 200, ALPHA_VALUE, 0, 8, 100, 0, WIDETYPE_1)
		drawer:drawTextureWithScale_Angle_Offset("UIData/Skill_up2.tga", 894, PLAYMODE_ARCADE_POSY+11-(i*96), 89, 35, 
				promotionImgTexXTable[styleIndex], promotionImgTexYTable[promotionIndex],
				200, 200, ALPHA_VALUE, 0, 8, 100, 0, WIDETYPE_1)
		
		-- ��ų ����
		drawer:setTextColor(255, 255, 255, 255)
		local size1 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, skillDesc)
		drawer:drawText(skillDesc, 927-size1/2, PLAYMODE_ARCADE_POSY+27-(i*96), WIDETYPE_1)
		
		-- ��ų�̸�
		drawer:setTextColor(255, 200, 80, 255)
		local size2 = GetStringSize(g_STRING_FONT_GULIMCHE, 12, skillName)
		drawer:drawText(skillName, 927-size2/2, PLAYMODE_ARCADE_POSY+45-(i*96), WIDETYPE_1)
	end
end

-- ��ų �ߵ� Ŀ�ǵ带 �׸���.
function RenderCommandOfSkillList(bShow, playMode, i, j, value)

	if bShow == 0 then
		return
	end
	
	-- �ߵ��� ��ų�� Ŀ�ǵ带 �׸���.
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	if playMode == PLAYMODE_GAME then
		drawer:drawTextureA("UIData/KyeOutput.tga", 850+(j*22), PLAYMODE_GAME_POSY+63-(i*96), 21, 21, tKeyImgTexX[value], tKeyImgTexY[value], ALPHA_VALUE+30, WIDETYPE_1)
	
	elseif playMode == PLAYMODE_PRACTICE then
		drawer:drawTextureA("UIData/KyeOutput.tga", 850+(j*22), PLAYMODE_PRACTICE_POSY+63-(i*96), 21, 21, tKeyImgTexX[value], tKeyImgTexY[value], ALPHA_VALUE+30, WIDETYPE_1)
	
	elseif playMode == PLAYMODE_QUEST then
		drawer:drawTextureA("UIData/KyeOutput.tga", 850+(j*22), PLAYMODE_ARCADE_POSY+63-(i*96), 21, 21, tKeyImgTexX[value], tKeyImgTexY[value], ALPHA_VALUE+30, WIDETYPE_1)
	end
end



-- ���ʴ��						   UP,DOWN,LEFT,RIGHT,D,S,A,	S,S,S,S,			S,S,S,S,			DASH,S,S,S,S,			E,W,Q,			-,-,OR
local tKeyBigImgTexX = {["err"]=0, 0,37,74,111,74,37,0,			37,37,37,37,		37,37,37,37,		111,37,37,37,37,		74,37,0,		148,148,148}
local tKeyBigImgTexY = {["err"]=0, 176,176,176,176,250,250,250,	250,250,250,250,	250,250,250,250,	213,250,250,250,250,	213,213,213,	213,213,176}
local tKeyInfo = {["err"]=0, 0,0,0,0,0,0,0,0}
local tTempKeyInfo = {["err"]=0, 0,0,0,0,0,0,0,0}
local MAX_COUNT = 8
local keyActionTime = 0
function SetKeyInput(bShow, playMode, value)
	--[[
	if bShow == 0 then
		return
	end
	
	if playMode == PLAYMODE_GAME or playMode == PLAYMODE_PRACTICE or playMode == PLAYMODE_QUEST then
		
		for i=1, MAX_COUNT-1 do
			tTempKeyInfo[i+1] = tKeyInfo[i]
		end
		
		tKeyInfo[1] = value
		
		for i=1+1, MAX_COUNT do
			tKeyInfo[i] = tTempKeyInfo[i]
		end
		
		keyActionTime = 0
	end
	--]]
end


function RenderHelpFunction(playMode)
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	if playMode == PLAYMODE_GAME then
	--	drawer:drawTexture("UIData/kyeOutput.tga", 274, 32, 74, 27, 186, 86)					-- F10(Űǥ��)
	elseif playMode == PLAYMODE_PRACTICE then
	--	drawer:drawTexture("UIData/kyeOutput.tga", 9, 130, 74, 27, 186, 86)						-- F10(Űǥ��)
	elseif playMode == PLAYMODE_QUEST then
		--drawer:drawTexture("UIData/kyeOutput.tga", 210, 106, 74, 27, 186, 86)					-- F10(Űǥ��)
	end
end

isArcadeBoss = false

function RenderKeyInput(bShow, playMode, deltaTime)

	if bShow == 0 then
		return
	end
	
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()	
	if playMode == PLAYMODE_GAME then
		drawer:drawTextureA("UIData/kyeOutput.tga", 334, PLAYMODE_GAME_POSY+174, 356, 41, 0, 287, ALPHA_VALUE, WIDETYPE_7)		-- Ű��� ����
		local value = 0
		local ALPHA = ALPHA_VALUE-50
		for i=2, MAX_COUNT do
			value = tKeyInfo[i]
			if value > 0 then
				drawer:drawTextureA("UIData/KyeOutput.tga", 673-(i*40), PLAYMODE_GAME_POSY+176, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], ALPHA, WIDETYPE_7)
			end
		end
		
		ALPHA = 220
		value = tKeyInfo[1]
		if value > 0 then
			keyActionTime = keyActionTime + deltaTime
			local scale = Effect_Linear_EaseNone(keyActionTime, 0, 150-keyActionTime, 50)
			if scale < 0 then
				scale = 0
			end
			drawer:drawTextureWithScale_Angle_Offset("UIData/KyeOutput.tga", 655, PLAYMODE_GAME_POSY+194, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], 
										scale+255, scale+255, ALPHA, 0, 8, 100, 0, WIDETYPE_7)
		end
	
	elseif playMode == PLAYMODE_PRACTICE then
		drawer:drawTextureA("UIData/kyeOutput.tga", 364, PLAYMODE_GAME_POSY+174, 356, 41, 0, 287, ALPHA_VALUE, WIDETYPE_7)		-- Ű��� ����
		local value = 0
		local ALPHA = ALPHA_VALUE-50
		for i=2, MAX_COUNT do
			 value = tKeyInfo[i]
			if value > 0 then
				drawer:drawTextureA("UIData/KyeOutput.tga", 703-(i*40), PLAYMODE_GAME_POSY+176, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], ALPHA, WIDETYPE_7)
			end
		end

		ALPHA = 220
		value = tKeyInfo[1]
		if value > 0 then
			keyActionTime = keyActionTime + deltaTime
			local scale = Effect_Linear_EaseNone(keyActionTime, 0, 150-keyActionTime, 50)
			if scale < 0 then
				scale = 0
			end
			drawer:drawTextureWithScale_Angle_Offset("UIData/KyeOutput.tga", 685, PLAYMODE_GAME_POSY+194, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], 
										scale+255, scale+255, ALPHA, 0, 8, 100, 0, WIDETYPE_7)
		end
	
	elseif playMode == PLAYMODE_QUEST then
	
		if isArcadeBoss then
			drawer:drawTextureA("UIData/kyeOutput.tga", 350, PLAYMODE_ARCADE_POSY+174-40, 356, 41, 0, 287, ALPHA_VALUE, WIDETYPE_7)		-- Ű��� ����
		else
			drawer:drawTextureA("UIData/kyeOutput.tga", 350, PLAYMODE_ARCADE_POSY+174, 356, 41, 0, 287, ALPHA_VALUE, WIDETYPE_7)		-- Ű��� ����
		end
		local value = 0
		local ALPHA = ALPHA_VALUE-50
		for i=2, MAX_COUNT do
			local value = tKeyInfo[i]
			if value > 0 then
				if isArcadeBoss then
					drawer:drawTextureA("UIData/KyeOutput.tga", 689-(i*40), PLAYMODE_ARCADE_POSY+176-40, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], ALPHA, WIDETYPE_7)
				else
					drawer:drawTextureA("UIData/KyeOutput.tga", 689-(i*40), PLAYMODE_ARCADE_POSY+176, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], ALPHA, WIDETYPE_7)
				end
			end
		end
		
		ALPHA = 220
		value = tKeyInfo[1]
		if value > 0 then
			keyActionTime = keyActionTime + deltaTime
			local scale = Effect_Linear_EaseNone(keyActionTime, 0, 150-keyActionTime, 50)
			if scale < 0 then
				scale = 0
			end
			
			if isArcadeBoss then
				drawer:drawTextureWithScale_Angle_Offset("UIData/KyeOutput.tga", 671, PLAYMODE_ARCADE_POSY+194-40, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], 
										scale+255, scale+255, ALPHA, 0, 8, 100, 0, WIDETYPE_7)
			else
				drawer:drawTextureWithScale_Angle_Offset("UIData/KyeOutput.tga", 671, PLAYMODE_ARCADE_POSY+194, 37, 37, tKeyBigImgTexX[value], tKeyBigImgTexY[value], 
										scale+255, scale+255, ALPHA, 0, 8, 100, 0, WIDETYPE_7)
			end
		end
	end
end

--[[
function ShowFrameRate(frame)
	drawer = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow"):getDrawer()
	drawer:setFont(g_STRING_FONT_GULIMCHE, 12)
	drawer:setTextColor(255, 255, 255, 255)
	drawer:drawText(frame, 500, 400)
end
--]]

--------------------------------------------------------------------
-- ä�� ���� ��ġ ����
--------------------------------------------------------------------
function ChangeChannelPosition(channelName)
	winMgr:getWindow('ChannelPositionText'):setTextExtends(channelName, g_STRING_FONT_GULIMCHE, 112,  120,230,150, 255,   0,   255,198,30,255);
end

--------------------------------------------------------------------
-- ä�� ���� ������ ���� ��ư
--------------------------------------------------------------------
function OnclickOutNewBtn()
	DebugStr('OnclickOutNewBtn')
	local CurrentPosIndex = GetCurrentWndType()
	DebugStr('CurrentPosIndex:'..CurrentPosIndex)
	if CurrentPosIndex == WND_LUA_QUESTROOM then
		ExitDungeon()
	elseif CurrentPosIndex == WND_LUA_BATTLEROOM then
		BattleRoomOut()
	elseif CurrentPosIndex == WND_LUA_QUEST then
		WndQuest_ClickOut()
	elseif CurrentPosIndex == WND_LUA_AUTOMATCHLOBBY then
		BtnPageMove_MoveBackWindow(WND_LUA_AUTOMATCHLOBBY)
	elseif CurrentPosIndex == WND_LUA_ZOMBIE_DEFENCE then
		BattleRoomOut()
	end
end

function CommonChattLButtonUp()
	DebugStr('CommonChattLButtonUp')
	if winMgr:getWindow('pu_btnContainer') ~= nil then
		local root = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow")
		root:removeChildWindow(winMgr:getWindow('pu_btnContainer'));
	end
end

function GetReportCharacterName(args)
	DebugStr('GetReportCharacterName')
	local local_window = CEGUI.toWindowEventArgs(args).window;	
	local CharacterName = CEGUI.toMultiLineEditbox(local_window):getMultiText()
	CharacterName = findTextErase(CharacterName, "<ZM>")
	CharacterName = findTextErase(CharacterName, "<Sultan>")
	local _my_name, _money, _level, _promotion, _my_style, _type, _sp_point, _hp_point, _experience = GetMyInfo(false);
	
	if _my_name == CharacterName then
		if winMgr:getWindow('pu_btnContainer') ~= nil then
			local root = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow")
			root:removeChildWindow(winMgr:getWindow('pu_btnContainer'));
		end
		return
	end
	
	if CharacterName == nil or CharacterName == "" then
		if winMgr:getWindow('pu_btnContainer') ~= nil then
			local root = CEGUI.WindowManager:getSingleton():getWindow("DefaultWindow")
			root:removeChildWindow(winMgr:getWindow('pu_btnContainer'));
		end
	else
		OnClickChatReportCharacter(CharacterName)
	end
	
end

function OnClickChatReportCharacter(char_name)
	--[[
	if g_IsAbataRButtonUp then
		g_IsAbataRButtonUp = false
		return;
	end
	--]]
	g_IsAbataRButtonUp = false
	local m_pos = mouseCursor:getPosition();
	
	if g_CURRENT_WIN_SIZEY - 80 < m_pos.y then
		m_pos.y = m_pos.y - 50
	end
	ShowPopupWindow(m_pos.x, m_pos.y, 1);
	g_strSelectRButtonUp = char_name;
	winMgr:getWindow('pu_showInfo'):setEnabled(true)
		
	local CurrentPosIndex = GetCurrentWndType()
	if CurrentPosIndex == WND_LUA_GAME  or CurrentPosIndex == WND_LUA_QUEST then
		MakeMessengerPopup("pu_windowName", "pu_privatChat");
	else
		if IsKoreanLanguage() then
			MakeMessengerPopup("pu_windowName", "pu_profile", "pu_privatChat", "pu_blockUser");
		else
			MakeMessengerPopup("pu_windowName", "pu_profile", "pu_privatChat");
		end
	end
end


--------------------------------------------------------------------
-- ������ ���� �Լ�
--------------------------------------------------------------------
-- ���� �� �˾��� ���� �� ���� �ִ� ����
TIPTEXTLISTMAX	 = 13


-- ������ ���� ���ڻ� ����
function SettingGameTipColor(TipText, WindowName)
	
	local tbufStringTable = {['err']=0, }
	local tbufSpecialTable = {['err']=0, }
	local count = 0
	if TipText ~= "" then
		tbufStringTable = {['err']=0, }
		tbufSpecialTable = {['err']=0, }
		count = 0
		
		tbufStringTable, tbufSpecialTable = cuttingString(TipText, tbufStringTable, tbufSpecialTable, count)

		winMgr:getWindow(WindowName):clearTextExtends()
		for i=0, #tbufStringTable do
			local colorIndex = tonumber(tbufSpecialTable[i])
			if colorIndex == nil then
				colorIndex = 0
			end
			winMgr:getWindow(WindowName):addTextExtends(tbufStringTable[i], g_STRING_FONT_GULIM, 12, 
						tSpecialColorTable[colorIndex][0], tSpecialColorTable[colorIndex][1], tSpecialColorTable[colorIndex][2], 255,   1, 0,0,0,255)
		end
	end
end

-- ������ ������ ���� �����ؼ� ���� �ش�
function ShowGameTipText(TipText)
	local Index = string.find(TipText, "\n")
	
	if Index ~= nil then
		winMgr:getWindow("RandomTipText"):setPosition(45, 10)
	else
		winMgr:getWindow("RandomTipText"):setPosition(45, 18)
	end
		
	SettingGameTipColor(TipText, "RandomTipText")
end

-- �������� Ŭ���̾�Ʈ �� ���� �ϱ� ������ ���� ���� �ʴ´�
function GameTipPrintCancel()
--	FinisGameTip()
	GameTipPrint()
end

-- ���� �� �˾��� �� ������ �ѷ��ش�
function ShowGameTipPopUpTextlist(Page)

	for i = 0, TIPTEXTLISTMAX do
		TipText = ShowGameTipTextlist(i , Page)
		SettingGameTipColor(TipText, "TipPopUpText"..i)
	end
	
end

-- ���� �� �˾� ���� ����
function PrevTipList()
	Page = 0
	
--	if Page >= 1 then
		ShowGameTipPopUpTextlist(Page)
		winMgr:getWindow("TipPopUpPageText"):setText("1/2")
--	else
--		Page = Page + 1
--	end
end

-- ���� �� �˾� ���� ����
function NestTipList()
	Page = 1
	
--	if Page < TIPLISTPAGEMAX then
		ShowGameTipPopUpTextlist(Page)
		winMgr:getWindow("TipPopUpPageText"):setText("2/2")
--	else
--		Page = Page - 1
--	end
end



-- ������ �˾��� �����ش�
function GameTipPopUpOpne()
	winMgr:getWindow("TipPopUpBackImage"):addChildWindow(winMgr:getWindow("TipPopUpCancelButton"))
	winMgr:getWindow("TipPopUpBackImage"):addChildWindow(winMgr:getWindow("TipPopUpRadioButton"))
	winMgr:getWindow("TipPopUpBackImage"):addChildWindow(winMgr:getWindow("TipPopUpPrevButton"))
	winMgr:getWindow("TipPopUpBackImage"):addChildWindow(winMgr:getWindow("TipPopUpNextButton"))
	winMgr:getWindow("TipPopUpBackImage"):addChildWindow(winMgr:getWindow("TipPopUpPageText"))
	--[[
	for i = 0, TIPTEXTLISTMAX do
		winMgr:getWindow("TipPopUpBackImage"):addChildWindow(winMgr:getWindow("TipPopUpSortImage"..i))
	end
	--]]
	winMgr:getWindow("TipPopUpBackImageBG"):addChildWindow(winMgr:getWindow("TipPopUpBackImage"))
	ShowGameTipPopUpTextlist(0)
	winMgr:getWindow("TipPopUpPageText"):setText("1/"..GameTipTextlistPage())
	winMgr:getWindow("TipPopUpBackImageBG"):setAlwaysOnTop(true)
	winMgr:getWindow("TipPopUpBackImageBG"):setVisible(true)
end

-- ������ �˾��� �ݴ´�
function GameTipPopUpCancel()
	winMgr:getWindow("TipPopUpBackImageBG"):setVisible(false)
end




--------------------------------------------------------------------
-- �ִϸ��̼��� ���� �ϴ� Īȣ�� ���� �Լ���
--------------------------------------------------------------------
--local AniTexTickX = 0
--local AniTexTickY = 0

--function AniTypeOne()
--	AniTexTickX = AniTexTickX + 1
--	if AniTexTickX == 200 then
--		AniTexTickX = 0
--	end
--end

--function AniTypeTwo()
--end



function GetItemDirectory(languageCode)

	return "item/"
end

function GetClubDirectory(languageCode)

	if IsKoreanLanguage() then
		return GetItemDirectory(languageCode) .. "ClubEmblemKor/"
	else
		return GetItemDirectory(languageCode) .. "ClubEmblem/"
	end
end


--------------------------------------------------------------------
-- Rungsimun @ GameInside - MatchMaking
--------------------------------------------------------------------
MATCHMAKING_IDLE 				= 0
MATCHMAKING_WAITING 			= 1
MATCHMAKING_FINDING_MATCH 		= 2
MATCHMAKING_MATCHED				= 3
MATCHMAKING_ENTERING_GAME		= 4
MATCHMAKING_PLAYING				= 5

current_status = MATCHMAKING_IDLE

-- ปัดเศษขึ้น
function ceil(value)
    local int_part = value - (value % 1) -- ตัดค่าทศนิยมออก
    if value > int_part then
        return int_part + 1 -- ถ้ามีเศษ ให้เพิ่ม 1
    else
        return int_part -- ถ้าไม่มีเศษ คืนค่าตัวเลขเต็ม
    end
end

-- ปัดเศษลง
function floor(value)
    local int_part = value - (value % 1) -- ตัดค่าทศนิยมออก
    if value < 0 and value % 1 ~= 0 then
        return int_part - 1 -- สำหรับค่าลบที่มีเศษ ให้ลดลงอีก 1
    else
        return int_part -- สำหรับค่าบวกหรือไม่มีเศษ
    end
end

function jsonParse(jsonString)
    local function parseValue(json)
        json = json:match("^%s*(.-)%s*$")
        if json:sub(1, 1) == '"' then
            return parseString(json)
        elseif json:sub(1, 1):match("[%d%-]") then
            return parseNumber(json)
        elseif json:sub(1, 4) == "true" then
            return true, json:sub(5)
        elseif json:sub(1, 5) == "false" then
            return false, json:sub(6)
        elseif json:sub(1, 4) == "null" then
            return nil, json:sub(5)
        elseif json:sub(1, 1) == "{" then
            return parseObject(json)
        elseif json:sub(1, 1) == "[" then
            return parseArray(json)
        end
        error("Invalid JSON value: " .. json)
    end

    local function parseString(json)
        local value = json:match('^"(.-)"')
        if not value then error("Invalid JSON string") end
        return value, json:sub(#value + 3)
    end

    local function parseNumber(json)
        local value = json:match("^%-?%d+%.?%d*[eE%-+%d]*")
        if not value then error("Invalid JSON number") end
        return tonumber(value), json:sub(#value + 1)
    end

    local function parseArray(json)
        local array, remaining = {}, json:sub(2)
        while true do
            remaining = remaining:match("^%s*(.-)%s*$")
            if remaining:sub(1, 1) == "]" then
                return array, remaining:sub(2)
            end
            local value
            value, remaining = parseValue(remaining)
            table.insert(array, value)
            remaining = remaining:match("^%s*(.-)%s*$")
            if remaining:sub(1, 1) == "]" then
                return array, remaining:sub(2)
            elseif remaining:sub(1, 1) ~= "," then
                error("Invalid JSON array")
            end
            remaining = remaining:sub(2)
        end
    end

    local function parseObject(json)
        local object, remaining = {}, json:sub(2)
        while true do
            remaining = remaining:match("^%s*(.-)%s*$")
            if remaining:sub(1, 1) == "}" then
                return object, remaining:sub(2)
            end
            local key
            key, remaining = parseString(remaining)
            remaining = remaining:match("^%s*:(.-)$")
            local value
            value, remaining = parseValue(remaining)
            object[key] = value
            remaining = remaining:match("^%s*(.-)%s*$")
            if remaining:sub(1, 1) == "}" then
                return object, remaining:sub(2)
            elseif remaining:sub(1, 1) ~= "," then
                error("Invalid JSON object")
            end
            remaining = remaining:sub(2)
        end
    end

    local result, _ = parseValue(jsonString)
    return result
end
